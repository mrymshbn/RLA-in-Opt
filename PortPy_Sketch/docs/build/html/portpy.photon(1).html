<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>portpy.photon package &mdash; PortPy 0.0.1 documentation</title>
      <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="_static/doctools.js"></script>
        <script src="_static/sphinx_highlight.js"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="portpy.photon.utils package" href="portpy.photon.utils.html" />
    <link rel="prev" title="portpy package" href="portpy.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="index.html" class="icon icon-home">
            PortPy
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="modules.html">portpy</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="portpy.html">portpy package</a><ul class="current">
<li class="toctree-l3 current"><a class="reference internal" href="portpy.html#subpackages">Subpackages</a><ul class="current">
<li class="toctree-l4 current"><a class="current reference internal" href="#">portpy.photon package</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="portpy.html#module-portpy">Module contents</a></li>
</ul>
</li>
</ul>
</li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">PortPy</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="modules.html">portpy</a></li>
          <li class="breadcrumb-item"><a href="portpy.html">portpy package</a></li>
      <li class="breadcrumb-item active">portpy.photon package</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/portpy.photon.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="portpy-photon-package">
<h1>portpy.photon package<a class="headerlink" href="#portpy-photon-package" title="Permalink to this heading"></a></h1>
<section id="subpackages">
<h2>Subpackages<a class="headerlink" href="#subpackages" title="Permalink to this heading"></a></h2>
<div class="toctree-wrapper compound">
<ul>
<li class="toctree-l1"><a class="reference internal" href="portpy.photon.utils.html">portpy.photon.utils package</a><ul>
<li class="toctree-l2"><a class="reference internal" href="portpy.photon.utils.html#submodules">Submodules</a></li>
<li class="toctree-l2"><a class="reference internal" href="portpy.photon.utils.html#module-portpy.photon.utils.load_data">portpy.photon.utils.load_data module</a><ul>
<li class="toctree-l3"><a class="reference internal" href="portpy.photon.utils.html#portpy.photon.utils.load_data.load_data"><code class="docutils literal notranslate"><span class="pre">load_data()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="portpy.photon.utils.html#portpy.photon.utils.load_data.load_file"><code class="docutils literal notranslate"><span class="pre">load_file()</span></code></a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="portpy.photon.utils.html#module-portpy.photon.utils.load_metadata">portpy.photon.utils.load_metadata module</a><ul>
<li class="toctree-l3"><a class="reference internal" href="portpy.photon.utils.html#portpy.photon.utils.load_metadata.list_to_dict"><code class="docutils literal notranslate"><span class="pre">list_to_dict()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="portpy.photon.utils.html#portpy.photon.utils.load_metadata.load_config_clinical_criteria"><code class="docutils literal notranslate"><span class="pre">load_config_clinical_criteria()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="portpy.photon.utils.html#portpy.photon.utils.load_metadata.load_config_planner_metadata"><code class="docutils literal notranslate"><span class="pre">load_config_planner_metadata()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="portpy.photon.utils.html#portpy.photon.utils.load_metadata.load_metadata"><code class="docutils literal notranslate"><span class="pre">load_metadata()</span></code></a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="portpy.photon.utils.html#module-portpy.photon.utils.save_nrrd">portpy.photon.utils.save_nrrd module</a><ul>
<li class="toctree-l3"><a class="reference internal" href="portpy.photon.utils.html#portpy.photon.utils.save_nrrd.save_nrrd"><code class="docutils literal notranslate"><span class="pre">save_nrrd()</span></code></a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="portpy.photon.utils.html#module-portpy.photon.utils.save_or_load_pickle">portpy.photon.utils.save_or_load_pickle module</a><ul>
<li class="toctree-l3"><a class="reference internal" href="portpy.photon.utils.html#portpy.photon.utils.save_or_load_pickle.load_inf_matrix"><code class="docutils literal notranslate"><span class="pre">load_inf_matrix()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="portpy.photon.utils.html#portpy.photon.utils.save_or_load_pickle.load_optimal_sol"><code class="docutils literal notranslate"><span class="pre">load_optimal_sol()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="portpy.photon.utils.html#portpy.photon.utils.save_or_load_pickle.load_plan"><code class="docutils literal notranslate"><span class="pre">load_plan()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="portpy.photon.utils.html#portpy.photon.utils.save_or_load_pickle.save_inf_matrix"><code class="docutils literal notranslate"><span class="pre">save_inf_matrix()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="portpy.photon.utils.html#portpy.photon.utils.save_or_load_pickle.save_optimal_sol"><code class="docutils literal notranslate"><span class="pre">save_optimal_sol()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="portpy.photon.utils.html#portpy.photon.utils.save_or_load_pickle.save_plan"><code class="docutils literal notranslate"><span class="pre">save_plan()</span></code></a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="portpy.photon.utils.html#portpy-photon-utils-slicer-script-module">portpy.photon.utils.slicer_script module</a></li>
<li class="toctree-l2"><a class="reference internal" href="portpy.photon.utils.html#module-portpy.photon.utils.sol_change_inf_matrix">portpy.photon.utils.sol_change_inf_matrix module</a><ul>
<li class="toctree-l3"><a class="reference internal" href="portpy.photon.utils.html#portpy.photon.utils.sol_change_inf_matrix.sol_change_inf_matrix"><code class="docutils literal notranslate"><span class="pre">sol_change_inf_matrix()</span></code></a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="portpy.photon.utils.html#module-portpy.photon.utils.view_in_slicer_jupyter">portpy.photon.utils.view_in_slicer_jupyter module</a><ul>
<li class="toctree-l3"><a class="reference internal" href="portpy.photon.utils.html#portpy.photon.utils.view_in_slicer_jupyter.view_in_slicer_jupyter"><code class="docutils literal notranslate"><span class="pre">view_in_slicer_jupyter()</span></code></a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="portpy.photon.utils.html#module-portpy.photon.utils">Module contents</a></li>
</ul>
</li>
</ul>
</div>
</section>
<section id="submodules">
<h2>Submodules<a class="headerlink" href="#submodules" title="Permalink to this heading"></a></h2>
</section>
<section id="module-portpy.photon.beam">
<span id="portpy-photon-beam-module"></span><h2>portpy.photon.beam module<a class="headerlink" href="#module-portpy.photon.beam" title="Permalink to this heading"></a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="portpy.photon.beam.Beams">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">portpy.photon.beam.</span></span><span class="sig-name descname"><span class="pre">Beams</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">beams_dict</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/portpy/photon/beam.html#Beams"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#portpy.photon.beam.Beams" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>A class representing beams_dict.</p>
<ul>
<li><p><strong>Attributes</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">:</span><span class="n">param</span> <span class="n">beams_dict</span><span class="p">:</span> <span class="n">beams_dict</span> <span class="n">dictionary</span> <span class="n">that</span> <span class="n">contains</span> <span class="n">information</span> <span class="n">about</span> <span class="n">the</span> <span class="n">beams_dict</span> <span class="ow">in</span> <span class="n">the</span> <span class="nb">format</span> <span class="n">of</span>
<span class="nb">dict</span><span class="p">:</span> <span class="p">{</span>
           <span class="s1">&#39;ID&#39;</span><span class="p">:</span> <span class="nb">list</span><span class="p">(</span><span class="nb">int</span><span class="p">),</span>
           <span class="s1">&#39;gantry_angle&#39;</span><span class="p">:</span> <span class="nb">list</span><span class="p">(</span><span class="nb">float</span><span class="p">),</span>
           <span class="s1">&#39;collimator_angle&#39;</span><span class="p">:</span> <span class="nb">list</span><span class="p">(</span><span class="nb">float</span><span class="p">)</span> <span class="p">}</span>
          <span class="p">}</span>

<span class="p">:</span><span class="nb">type</span> <span class="n">beams_dict</span><span class="p">:</span> <span class="nb">dict</span>
</pre></div>
</div>
</li>
<li><p><strong>Methods</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">:</span><span class="n">get_gantry_angle</span><span class="p">(</span><span class="n">beam_id</span><span class="p">:</span> <span class="n">Optional</span><span class="p">(</span><span class="nb">int</span><span class="p">,</span> <span class="n">List</span><span class="p">[</span><span class="nb">int</span><span class="p">]):</span>
    <span class="n">Get</span> <span class="n">gantry</span> <span class="n">angle</span> <span class="ow">in</span> <span class="n">degrees</span>
<span class="p">:</span><span class="n">get_collimator_angle</span><span class="p">(</span><span class="n">beam_id</span><span class="p">):</span>
    <span class="n">Get</span> <span class="n">collimator</span> <span class="n">angle</span> <span class="ow">in</span> <span class="n">degrees</span>
</pre></div>
</div>
</li>
</ul>
<dl class="py method">
<dt class="sig sig-object py" id="portpy.photon.beam.Beams.create_beamlet_idx_2d_grid">
<span class="sig-name descname"><span class="pre">create_beamlet_idx_2d_grid</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">beam_id</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">ndarray</span></span></span><a class="reference internal" href="_modules/portpy/photon/beam.html#Beams.create_beamlet_idx_2d_grid"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#portpy.photon.beam.Beams.create_beamlet_idx_2d_grid" title="Permalink to this definition"></a></dt>
<dd><p>Create 2d grid for the beamlets where each element is 2.5mm*2.5mm for the given beam id from x and y coordinates of beamlets.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>beam_id</strong> – beam_id for the beam</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>2d grid of beamlets for the beam</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="portpy.photon.beam.Beams.get_all_beam_ids">
<span class="sig-name descname"><span class="pre">get_all_beam_ids</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">int</span><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="_modules/portpy/photon/beam.html#Beams.get_all_beam_ids"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#portpy.photon.beam.Beams.get_all_beam_ids" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="portpy.photon.beam.Beams.get_beamlet_height">
<span class="sig-name descname"><span class="pre">get_beamlet_height</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">float</span></span></span><a class="reference internal" href="_modules/portpy/photon/beam.html#Beams.get_beamlet_height"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#portpy.photon.beam.Beams.get_beamlet_height" title="Permalink to this definition"></a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>beamlet height in the original beam</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="portpy.photon.beam.Beams.get_beamlet_idx_2dgrid">
<span class="sig-name descname"><span class="pre">get_beamlet_idx_2dgrid</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">beam_id</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">ndarray</span></span></span><a class="reference internal" href="_modules/portpy/photon/beam.html#Beams.get_beamlet_idx_2dgrid"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#portpy.photon.beam.Beams.get_beamlet_idx_2dgrid" title="Permalink to this definition"></a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>beam_id</strong> – beam_id for the beam</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>2d grid of beamlets in 2.5*2.5 resolution</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="portpy.photon.beam.Beams.get_beamlet_width">
<span class="sig-name descname"><span class="pre">get_beamlet_width</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">float</span></span></span><a class="reference internal" href="_modules/portpy/photon/beam.html#Beams.get_beamlet_width"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#portpy.photon.beam.Beams.get_beamlet_width" title="Permalink to this definition"></a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>beamlet width in the original beam</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="portpy.photon.beam.Beams.get_collimator_angle">
<span class="sig-name descname"><span class="pre">get_collimator_angle</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">beam_id</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Union</span><span class="p"><span class="pre">[</span></span><span class="pre">int</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">int</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Union</span><span class="p"><span class="pre">[</span></span><span class="pre">int</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">int</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="_modules/portpy/photon/beam.html#Beams.get_collimator_angle"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#portpy.photon.beam.Beams.get_collimator_angle" title="Permalink to this definition"></a></dt>
<dd><p>Get collimator angle</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>beam_id</strong> – beam_id for the beam</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>collimator angle for the beam_id</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="portpy.photon.beam.Beams.get_gantry_angle">
<span class="sig-name descname"><span class="pre">get_gantry_angle</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">beam_id</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Union</span><span class="p"><span class="pre">[</span></span><span class="pre">int</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">int</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Union</span><span class="p"><span class="pre">[</span></span><span class="pre">int</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">int</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="_modules/portpy/photon/beam.html#Beams.get_gantry_angle"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#portpy.photon.beam.Beams.get_gantry_angle" title="Permalink to this definition"></a></dt>
<dd><p>Get gantry angle</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>beam_id</strong> – beam_id for the beam</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>gantry angle for the beam_id</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="portpy.photon.beam.Beams.get_original_map">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">get_original_map</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">beam_map</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/portpy/photon/beam.html#Beams.get_original_map"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#portpy.photon.beam.Beams.get_original_map" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="portpy.photon.beam.Beams.preprocess_beams">
<span class="sig-name descname"><span class="pre">preprocess_beams</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/portpy/photon/beam.html#Beams.preprocess_beams"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#portpy.photon.beam.Beams.preprocess_beams" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="portpy.photon.beam.Beams.sort_beamlets">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">sort_beamlets</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">b_map</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/portpy/photon/beam.html#Beams.sort_beamlets"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#portpy.photon.beam.Beams.sort_beamlets" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

</dd></dl>

</section>
<section id="module-portpy.photon.clinical_criteria">
<span id="portpy-photon-clinical-criteria-module"></span><h2>portpy.photon.clinical_criteria module<a class="headerlink" href="#module-portpy.photon.clinical_criteria" title="Permalink to this heading"></a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="portpy.photon.clinical_criteria.ClinicalCriteria">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">portpy.photon.clinical_criteria.</span></span><span class="sig-name descname"><span class="pre">ClinicalCriteria</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">clinical_criteria</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/portpy/photon/clinical_criteria.html#ClinicalCriteria"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#portpy.photon.clinical_criteria.ClinicalCriteria" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>A class representing clinical criteria.</p>
<ul>
<li><p><strong>Attributes</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">:</span><span class="n">param</span> <span class="n">clinical_criteria_dict</span><span class="p">:</span> <span class="n">dictionary</span> <span class="n">containing</span> <span class="n">metadata</span> <span class="n">about</span> <span class="n">clinical</span> <span class="n">criteria</span>

<span class="p">:</span><span class="n">Example</span>
        <span class="nb">dict</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;disease_site&quot;</span><span class="p">:</span> <span class="s2">&quot;Lung&quot;</span><span class="p">,</span>
        <span class="s2">&quot;protocol_name&quot;</span><span class="p">:</span> <span class="s2">&quot;Lung_Default_2Gy_30Fr&quot;</span><span class="p">,</span>
        <span class="s2">&quot;pres_per_fraction_gy&quot;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span>
        <span class="s2">&quot;num_of_fractions&quot;</span><span class="p">:</span> <span class="mi">30</span><span class="p">,</span>
        <span class="s2">&quot;criteria&quot;</span><span class="p">:</span> <span class="p">[</span>
            <span class="p">{</span>
              <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;max_dose&quot;</span><span class="p">,</span>
              <span class="s2">&quot;parameters&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s2">&quot;struct&quot;</span><span class="p">:</span> <span class="s2">&quot;GTV&quot;</span>
              <span class="p">}}</span>
</pre></div>
</div>
</li>
<li><dl class="simple">
<dt><strong>Methods</strong> ::</dt><dd><p>:add_criterion(criterion:str, parameters:dict, constraints:dict)
:modify_criterion(criterion:str, parameters:dict, constraints:dict)</p>
</dd>
</dl>
</li>
</ul>
<dl class="py method">
<dt class="sig sig-object py" id="portpy.photon.clinical_criteria.ClinicalCriteria.add_criterion">
<span class="sig-name descname"><span class="pre">add_criterion</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">criterion</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">parameters</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">constraints</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="reference internal" href="_modules/portpy/photon/clinical_criteria.html#ClinicalCriteria.add_criterion"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#portpy.photon.clinical_criteria.ClinicalCriteria.add_criterion" title="Permalink to this definition"></a></dt>
<dd><p>Add criterion to the clinical criteria dictionary</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>criterion</strong> – criterion name. e.g. max_dose</p></li>
<li><p><strong>parameters</strong> – parameters dictionary e.g. parameters = {‘struct’:’PTV’}</p></li>
<li><p><strong>constraints</strong> – constraints dictionary e.g. constraints = {‘limit_dose_gy’:66, ‘goal_dose_gy’:60}</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>add the criteria to clinical criteria dictionary</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="portpy.photon.clinical_criteria.ClinicalCriteria.create_criterion">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">create_criterion</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">criterion</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">parameters</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">constraints</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/portpy/photon/clinical_criteria.html#ClinicalCriteria.create_criterion"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#portpy.photon.clinical_criteria.ClinicalCriteria.create_criterion" title="Permalink to this definition"></a></dt>
<dd><p>Create criterion and return list</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>criterion</strong> – criterion name. e.g. max_dose</p></li>
<li><p><strong>parameters</strong> – parameters dictionary e.g. parameters = {‘struct’:’PTV’}</p></li>
<li><p><strong>constraints</strong> – constraints dictionary e.g. constraints = {‘limit_dose_gy’:66, ‘goal_dose_gy’:60}</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>add the criteria to clinical criteria dictionary</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="portpy.photon.clinical_criteria.ClinicalCriteria.get_criteria">
<span class="sig-name descname"><span class="pre">get_criteria</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">dict</span><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="_modules/portpy/photon/clinical_criteria.html#ClinicalCriteria.get_criteria"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#portpy.photon.clinical_criteria.ClinicalCriteria.get_criteria" title="Permalink to this definition"></a></dt>
<dd><p>Returns all the clinical criteria
:return:</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="portpy.photon.clinical_criteria.ClinicalCriteria.modify_criterion">
<span class="sig-name descname"><span class="pre">modify_criterion</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">criterion</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">parameters</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">constraints</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="reference internal" href="_modules/portpy/photon/clinical_criteria.html#ClinicalCriteria.modify_criterion"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#portpy.photon.clinical_criteria.ClinicalCriteria.modify_criterion" title="Permalink to this definition"></a></dt>
<dd><p>Modify the criterion in clinical criteria dictionary</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>criterion</strong> – criterion name. e.g. max_dose</p></li>
<li><p><strong>parameters</strong> – parameters dictionary e.g. parameters = {‘struct’:’PTV’}</p></li>
<li><p><strong>constraints</strong> – constraints dictionary e.g. constraints = {‘limit_dose_gy’:66, ‘goal_dose_gy’:60}</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>add the criteria to clinical criteria dictionary</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</section>
<section id="module-portpy.photon.cvxpy_prob">
<span id="portpy-photon-cvxpy-prob-module"></span><h2>portpy.photon.cvxpy_prob module<a class="headerlink" href="#module-portpy.photon.cvxpy_prob" title="Permalink to this heading"></a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="portpy.photon.cvxpy_prob.CvxPyProb">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">portpy.photon.cvxpy_prob.</span></span><span class="sig-name descname"><span class="pre">CvxPyProb</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">my_plan</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="#portpy.photon.plan.Plan" title="portpy.photon.plan.Plan"><span class="pre">Plan</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">inf_matrix</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="#portpy.photon.influence_matrix.InfluenceMatrix" title="portpy.photon.influence_matrix.InfluenceMatrix"><span class="pre">InfluenceMatrix</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max_constraints</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">dict</span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mean_constraints</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">dict</span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">opt_params</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/portpy/photon/cvxpy_prob.html#CvxPyProb"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#portpy.photon.cvxpy_prob.CvxPyProb" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Optimization class for creating cvxpy problem object</p>
<dl class="py method">
<dt class="sig sig-object py" id="portpy.photon.cvxpy_prob.CvxPyProb.add_boo">
<span class="sig-name descname"><span class="pre">add_boo</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">num_beams</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/portpy/photon/cvxpy_prob.html#CvxPyProb.add_boo"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#portpy.photon.cvxpy_prob.CvxPyProb.add_boo" title="Permalink to this definition"></a></dt>
<dd><p>Select optimal beams from set of beams using MIP
:param num_beams: number of beams to be selected
:return:</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="portpy.photon.cvxpy_prob.CvxPyProb.add_constraints">
<span class="sig-name descname"><span class="pre">add_constraints</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">constraints</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">list</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/portpy/photon/cvxpy_prob.html#CvxPyProb.add_constraints"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#portpy.photon.cvxpy_prob.CvxPyProb.add_constraints" title="Permalink to this definition"></a></dt>
<dd><p>Add constraint to the problem
:param constraints: list of constraints
:return:</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="portpy.photon.cvxpy_prob.CvxPyProb.add_dvh">
<span class="sig-name descname"><span class="pre">add_dvh</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dvh_constraint</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">list</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/portpy/photon/cvxpy_prob.html#CvxPyProb.add_dvh"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#portpy.photon.cvxpy_prob.CvxPyProb.add_dvh" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="portpy.photon.cvxpy_prob.CvxPyProb.add_max">
<span class="sig-name descname"><span class="pre">add_max</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">struct</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dose_gy</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/portpy/photon/cvxpy_prob.html#CvxPyProb.add_max"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#portpy.photon.cvxpy_prob.CvxPyProb.add_max" title="Permalink to this definition"></a></dt>
<dd><p>Add max constraints to the problem
:param struct: structure name
:param dose_gy: dose in Gy per fraction.
:return:</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="portpy.photon.cvxpy_prob.CvxPyProb.add_mean">
<span class="sig-name descname"><span class="pre">add_mean</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">struct</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dose_gy</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/portpy/photon/cvxpy_prob.html#CvxPyProb.add_mean"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#portpy.photon.cvxpy_prob.CvxPyProb.add_mean" title="Permalink to this definition"></a></dt>
<dd><p>Add mean constraints to the problem
:param struct: structure name
:param dose_gy: dose in Gy per fraction.
:return:</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="portpy.photon.cvxpy_prob.CvxPyProb.add_objective">
<span class="sig-name descname"><span class="pre">add_objective</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">obj</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/portpy/photon/cvxpy_prob.html#CvxPyProb.add_objective"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#portpy.photon.cvxpy_prob.CvxPyProb.add_objective" title="Permalink to this definition"></a></dt>
<dd><p>Add objective function to the problem
:param obj: objective function expression using cvxpy
:return:</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="portpy.photon.cvxpy_prob.CvxPyProb.add_overdose_quad">
<span class="sig-name descname"><span class="pre">add_overdose_quad</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">struct</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dose_gy</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">weight</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">10000</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/portpy/photon/cvxpy_prob.html#CvxPyProb.add_overdose_quad"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#portpy.photon.cvxpy_prob.CvxPyProb.add_overdose_quad" title="Permalink to this definition"></a></dt>
<dd><p>Add quadratic loss for the overdose voxels of the structure
:param struct: structure name
:param dose_gy: dose in Gy per fraction.
:param weight: penalty/weight in the objective for overdose
:return:</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="portpy.photon.cvxpy_prob.CvxPyProb.add_quad">
<span class="sig-name descname"><span class="pre">add_quad</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">struct</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">voxels</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">ndarray</span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">weight</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">10</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">voxels_weight</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">ndarray</span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/portpy/photon/cvxpy_prob.html#CvxPyProb.add_quad"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#portpy.photon.cvxpy_prob.CvxPyProb.add_quad" title="Permalink to this definition"></a></dt>
<dd><p>Add quadratic objective to the optimization problem
:param struct: structure for which quadratic loss is added to objective function
:param voxels: Default to None. If set, quadratic loss will be added for the given voxels
:param weight: Default to 10. penalty in the objective function for the given structure.
:param voxels_weight: weight for each voxel in the objective function
:return:</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="portpy.photon.cvxpy_prob.CvxPyProb.add_smoothness_quad">
<span class="sig-name descname"><span class="pre">add_smoothness_quad</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">weight</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">10</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">smoothness_X_weight</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">0.6</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">smoothness_Y_weight</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">0.4</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/portpy/photon/cvxpy_prob.html#CvxPyProb.add_smoothness_quad"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#portpy.photon.cvxpy_prob.CvxPyProb.add_smoothness_quad" title="Permalink to this definition"></a></dt>
<dd><p>Add quadratic smoothness to the optimization problem
:param weight: smoothness weight
:param smoothness_X_weight: weight in X direction of MLC (parallel to MLC)
:param smoothness_Y_weight: weight in Y direction of MLC (perpendicular to MLC)
:return:</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="portpy.photon.cvxpy_prob.CvxPyProb.add_underdose_quad">
<span class="sig-name descname"><span class="pre">add_underdose_quad</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">struct</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dose_gy</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">weight</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">100000</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/portpy/photon/cvxpy_prob.html#CvxPyProb.add_underdose_quad"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#portpy.photon.cvxpy_prob.CvxPyProb.add_underdose_quad" title="Permalink to this definition"></a></dt>
<dd><p>Add quadratic loss for the underdose voxels of the structure
:param struct: structure name
:param dose_gy: dose in Gy per fraction.
:param weight: penalty/weight in the objective for underdose
:return:</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="portpy.photon.cvxpy_prob.CvxPyProb.get_smoothness_matrix">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">get_smoothness_matrix</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">beamReq</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">dict</span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/portpy/photon/cvxpy_prob.html#CvxPyProb.get_smoothness_matrix"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#portpy.photon.cvxpy_prob.CvxPyProb.get_smoothness_matrix" title="Permalink to this definition"></a></dt>
<dd><p>Create smoothness matrix so that adjacent beamlets are smooth out to reduce MU</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>beamReq</strong> – beamlets dictionary from the object of influence matrix class</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>tuple(Qx, Qy) where
Qx: first matrix have values 1 and -1 for neighbouring beamlets in X direction
Qy: second matrix with values 1 and -1 for neighbouring beamlets in Y direction</p>
</dd>
<dt class="field-odd">Example<span class="colon">:</span></dt>
<dd class="field-odd"><p></p></dd>
</dl>
<dl class="simple">
<dt>Qx = [[1 -1 0 0 0 0]</dt><dd><p>[0 0 1 -1 0 0]
[0 0 0 0 1 -1]]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="portpy.photon.cvxpy_prob.CvxPyProb.get_sol">
<span class="sig-name descname"><span class="pre">get_sol</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">dict</span></span></span><a class="reference internal" href="_modules/portpy/photon/cvxpy_prob.html#CvxPyProb.get_sol"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#portpy.photon.cvxpy_prob.CvxPyProb.get_sol" title="Permalink to this definition"></a></dt>
<dd><p>Return optimal solution and influence matrix associated with it in the form of dictionary
:return:</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="portpy.photon.cvxpy_prob.CvxPyProb.matching_keys">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">matching_keys</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dictionary</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">search_string</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/portpy/photon/cvxpy_prob.html#CvxPyProb.matching_keys"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#portpy.photon.cvxpy_prob.CvxPyProb.matching_keys" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="portpy.photon.cvxpy_prob.CvxPyProb.solve">
<span class="sig-name descname"><span class="pre">solve</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/portpy/photon/cvxpy_prob.html#CvxPyProb.solve"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#portpy.photon.cvxpy_prob.CvxPyProb.solve" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

</dd></dl>

</section>
<section id="module-portpy.photon.evaluation">
<span id="portpy-photon-evaluation-module"></span><h2>portpy.photon.evaluation module<a class="headerlink" href="#module-portpy.photon.evaluation" title="Permalink to this heading"></a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="portpy.photon.evaluation.Evaluation">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">portpy.photon.evaluation.</span></span><span class="sig-name descname"><span class="pre">Evaluation</span></span><a class="reference internal" href="_modules/portpy/photon/evaluation.html#Evaluation"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#portpy.photon.evaluation.Evaluation" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<dl class="py method">
<dt class="sig sig-object py" id="portpy.photon.evaluation.Evaluation.get_dose">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">get_dose</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">sol</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">struct</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">volume_per</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dose_1d</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">ndarray</span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">weight_flag</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">float</span></span></span><a class="reference internal" href="_modules/portpy/photon/evaluation.html#Evaluation.get_dose"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#portpy.photon.evaluation.Evaluation.get_dose" title="Permalink to this definition"></a></dt>
<dd><p>Get dose_1d at volume percentage</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>sol</strong> – solution dictionary</p></li>
<li><p><strong>dose_1d</strong> – dose_1d in 1d</p></li>
<li><p><strong>struct</strong> – structure name for which to get the dose_1d</p></li>
<li><p><strong>volume_per</strong> – query the dose_1d at percentage volume</p></li>
<li><p><strong>weight_flag</strong> – for non uniform voxels weight flag always True</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>dose_1d at volume_percentage</p>
</dd>
<dt class="field-odd">Example<span class="colon">:</span></dt>
<dd class="field-odd"><p></p></dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">Evaluation</span><span class="o">.</span><span class="n">get_dose</span><span class="p">(</span><span class="n">sol</span><span class="o">=</span><span class="n">sol</span><span class="p">,</span> <span class="n">struct</span><span class="o">=</span><span class="s1">&#39;PTV&#39;</span><span class="p">,</span> <span class="n">volume_per</span><span class="o">=</span><span class="mi">90</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="portpy.photon.evaluation.Evaluation.get_dvh">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">get_dvh</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">sol</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">struct</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dose_1d</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">ndarray</span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">weight_flag</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/portpy/photon/evaluation.html#Evaluation.get_dvh"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#portpy.photon.evaluation.Evaluation.get_dvh" title="Permalink to this definition"></a></dt>
<dd><p>Get dvh for the structure</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>sol</strong> – optimal solution dictionary</p></li>
<li><p><strong>dose_1d</strong> – dose_1d which is not in solution dictionary</p></li>
<li><p><strong>struct</strong> – structure name</p></li>
<li><p><strong>weight_flag</strong> – for non uniform voxels weight flag always True</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>x, y –&gt; dvh for the structure</p>
</dd>
<dt class="field-odd">Example<span class="colon">:</span></dt>
<dd class="field-odd"><p></p></dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">Evaluation</span><span class="o">.</span><span class="n">get_dvh</span><span class="p">(</span><span class="n">sol</span><span class="o">=</span><span class="n">sol</span><span class="p">,</span> <span class="n">struct</span><span class="o">=</span><span class="s1">&#39;PTV&#39;</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="portpy.photon.evaluation.Evaluation.get_max_dose">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">get_max_dose</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">sol</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">struct</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dose_1d</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">float</span></span></span><a class="reference internal" href="_modules/portpy/photon/evaluation.html#Evaluation.get_max_dose"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#portpy.photon.evaluation.Evaluation.get_max_dose" title="Permalink to this definition"></a></dt>
<dd><p>Get maximum dose_1d for the structure</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>sol</strong> – optimal solution dictionary</p></li>
<li><p><strong>dose_1d</strong> – dose_1d which is not in solution dictionary</p></li>
<li><p><strong>struct</strong> – structure name</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>maximum dose_1d for the structure</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="portpy.photon.evaluation.Evaluation.get_mean_dose">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">get_mean_dose</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">sol</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">struct</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dose_1d</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">ndarray</span></span></span><a class="reference internal" href="_modules/portpy/photon/evaluation.html#Evaluation.get_mean_dose"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#portpy.photon.evaluation.Evaluation.get_mean_dose" title="Permalink to this definition"></a></dt>
<dd><p>Get mean dose_1d for the structure</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>sol</strong> – optimal solution dictionary</p></li>
<li><p><strong>dose_1d</strong> – dose_1d which is not in solution dictionary</p></li>
<li><p><strong>struct</strong> – structure name</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>mean dose_1d for the structure</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="portpy.photon.evaluation.Evaluation.get_volume">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">get_volume</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">sol</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">struct</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dose_value_gy</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dose_1d</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">ndarray</span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">weight_flag</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">float</span></span></span><a class="reference internal" href="_modules/portpy/photon/evaluation.html#Evaluation.get_volume"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#portpy.photon.evaluation.Evaluation.get_volume" title="Permalink to this definition"></a></dt>
<dd><p>Get volume at dose_1d value in Gy</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>sol</strong> – solution dictionary</p></li>
<li><p><strong>dose_1d</strong> – dose_1d in 1d</p></li>
<li><p><strong>struct</strong> – structure name for which to get the dose_1d</p></li>
<li><p><strong>dose_value_gy</strong> – query the volume at dose_value</p></li>
<li><p><strong>weight_flag</strong> – for non uniform voxels weight flag always True</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>dose_1d at volume_percentage</p>
</dd>
<dt class="field-odd">Example<span class="colon">:</span></dt>
<dd class="field-odd"><p></p></dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">Evaluation</span><span class="o">.</span><span class="n">get_volume</span><span class="p">(</span><span class="n">sol</span><span class="o">=</span><span class="n">sol</span><span class="p">,</span> <span class="n">struct</span><span class="o">=</span><span class="s1">&#39;PTV&#39;</span><span class="p">,</span> <span class="n">dose_value_gy</span><span class="o">=</span><span class="mi">60</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

</dd></dl>

</section>
<section id="module-portpy.photon.influence_matrix">
<span id="portpy-photon-influence-matrix-module"></span><h2>portpy.photon.influence_matrix module<a class="headerlink" href="#module-portpy.photon.influence_matrix" title="Permalink to this heading"></a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="portpy.photon.influence_matrix.InfluenceMatrix">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">portpy.photon.influence_matrix.</span></span><span class="sig-name descname"><span class="pre">InfluenceMatrix</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">plan_obj</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">beamlet_width_mm</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">2.5</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">beamlet_height_mm</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">2.5</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">opt_vox_xyz_res_mm</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">float</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">is_full</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">structure</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'PTV'</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/portpy/photon/influence_matrix.html#InfluenceMatrix"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#portpy.photon.influence_matrix.InfluenceMatrix" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>class of influence matrix</p>
<ul>
<li><p><strong>Attributes</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">:</span><span class="n">param</span> <span class="n">beamlet_width_mm</span><span class="p">:</span> <span class="n">The</span> <span class="n">width</span> <span class="n">of</span> <span class="n">each</span> <span class="n">beamlet</span> <span class="ow">in</span> <span class="n">millimeters</span><span class="o">.</span> <span class="n">Default</span> <span class="ow">is</span> <span class="mf">2.5</span><span class="o">.</span> <span class="n">Must</span> <span class="n">be</span> <span class="n">a</span> <span class="n">multiple</span> <span class="n">of</span> <span class="mf">2.5</span><span class="o">.</span>
<span class="p">:</span><span class="n">param</span> <span class="n">beamlet_height_mm</span><span class="p">:</span> <span class="n">The</span> <span class="n">height</span> <span class="n">of</span> <span class="n">each</span> <span class="n">beamlet</span> <span class="ow">in</span> <span class="n">millimeters</span><span class="o">.</span> <span class="n">Default</span> <span class="ow">is</span> <span class="mf">2.5</span><span class="o">.</span> <span class="n">Must</span> <span class="n">be</span> <span class="n">a</span> <span class="n">multiple</span> <span class="n">of</span> <span class="mf">2.5</span><span class="o">.</span>
<span class="p">:</span><span class="n">param</span> <span class="n">down_sample_xyz</span><span class="p">:</span> <span class="n">A</span> <span class="nb">list</span> <span class="n">of</span> <span class="n">integers</span> <span class="n">representing</span> <span class="n">the</span> <span class="n">downsampling</span> <span class="n">factors</span> <span class="k">for</span> <span class="n">the</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="ow">and</span> <span class="n">z</span> <span class="n">axes</span><span class="o">.</span> <span class="n">When</span> <span class="nb">set</span> <span class="n">to</span> <span class="kc">None</span><span class="p">,</span> <span class="n">the</span> <span class="n">original</span> <span class="n">optimization</span> <span class="n">voxel</span> <span class="n">resolution</span> <span class="n">will</span> <span class="n">be</span> <span class="n">used</span><span class="o">.</span>
<span class="p">:</span><span class="n">param</span> <span class="n">structure</span><span class="p">:</span> <span class="n">The</span> <span class="n">target</span> <span class="n">structure</span> <span class="k">for</span> <span class="n">creating</span> <span class="n">the</span> <span class="n">beamlets</span> <span class="ow">in</span> <span class="n">the</span> <span class="n">influence</span> <span class="n">matrix</span><span class="o">.</span> <span class="n">Default</span> <span class="ow">is</span> <span class="s1">&#39;PTV&#39;</span><span class="o">.</span>
<span class="p">:</span><span class="n">param</span> <span class="n">opt_voxels_dict</span><span class="p">:</span> <span class="n">A</span> <span class="n">dictionary</span> <span class="n">containing</span> <span class="n">the</span> <span class="n">voxels</span> <span class="n">that</span> <span class="n">were</span> <span class="n">used</span> <span class="ow">in</span> <span class="n">the</span> <span class="n">optimization</span> <span class="n">process</span><span class="o">.</span>
<span class="p">:</span><span class="n">param</span> <span class="n">beamlets_dict</span><span class="p">:</span> <span class="n">A</span> <span class="n">dictionary</span> <span class="n">containing</span> <span class="n">the</span> <span class="n">information</span> <span class="n">about</span> <span class="n">beamlets</span> <span class="n">used</span> <span class="ow">in</span> <span class="n">the</span> <span class="n">plan</span><span class="o">.</span>
<span class="p">:</span><span class="n">param</span> <span class="n">opt_beamlets_PTV_margin_mm</span><span class="p">:</span> <span class="n">A</span> <span class="nb">float</span> <span class="n">value</span> <span class="n">representing</span> <span class="n">the</span> <span class="n">margin_mm</span> <span class="n">around</span> <span class="n">the</span> <span class="n">PTV</span> <span class="n">that</span> <span class="n">was</span> <span class="n">used</span> <span class="ow">in</span> <span class="n">creating</span> <span class="n">beamlets</span>
<span class="p">:</span><span class="n">param</span> <span class="n">A</span><span class="p">:</span> <span class="n">influence</span> <span class="n">matrix</span> <span class="n">that</span> <span class="ow">is</span> <span class="n">generated</span> <span class="n">by</span> <span class="n">the</span> <span class="n">get_influence_matrix</span><span class="p">()</span> <span class="n">method</span><span class="o">.</span>
<span class="p">:</span><span class="n">param</span> <span class="n">dose_3d</span><span class="p">:</span> <span class="mi">3</span><span class="n">D</span> <span class="n">dose_1d</span> <span class="n">distribution</span><span class="o">.</span> <span class="n">It</span> <span class="ow">is</span> <span class="n">saved</span> <span class="k">as</span> <span class="n">attribute</span> <span class="n">once</span> <span class="n">the</span> <span class="n">method</span> <span class="n">dose_1d_to_3d</span><span class="p">()</span> <span class="ow">is</span> <span class="n">called</span>
        <span class="n">so</span> <span class="n">that</span> <span class="n">it</span> <span class="n">doesnt</span> <span class="n">have</span> <span class="n">to</span> <span class="n">be</span> <span class="n">computed</span> <span class="n">again</span>
</pre></div>
</div>
</li>
<li><dl class="simple">
<dt><strong>Methods</strong> ::</dt><dd><dl class="simple">
<dt>:dose_1d_to_3d(sol)</dt><dd><p>Convert dose_1d from 1d to 3d and return dose_1d in 3d</p>
</dd>
<dt>:dose_3d_to_1d(dose_3d)</dt><dd><p>Convert dose_1d from 3d to 1d voxels and return dose_1d in 1d</p>
</dd>
<dt>:fluence_2d_to_1d(fluence_2d)</dt><dd><p>Create vector of intensities from 2d fluence maps</p>
</dd>
<dt>:fluence_1d_to_2d(fluence_1d)</dt><dd><p>From vector of intensities create 2d fluence maps</p>
</dd>
</dl>
</dd>
</dl>
</li>
</ul>
<dl class="py method">
<dt class="sig sig-object py" id="portpy.photon.influence_matrix.InfluenceMatrix.create_BEV_mask_from_contours">
<span class="sig-name descname"><span class="pre">create_BEV_mask_from_contours</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">plan_obj</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ind</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">structure</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'PTV'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">margin_mm</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">float</span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">ndarray</span></span></span><a class="reference internal" href="_modules/portpy/photon/influence_matrix.html#InfluenceMatrix.create_BEV_mask_from_contours"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#portpy.photon.influence_matrix.InfluenceMatrix.create_BEV_mask_from_contours" title="Permalink to this definition"></a></dt>
<dd><p>Since beams object contain projection of structure contours on BEV, this function helps to create mask from those contours on BEV</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>plan_obj</strong> – object of class Plan</p></li>
<li><p><strong>ind</strong> – indices of the beam in beamlet dictionary</p></li>
<li><p><strong>structure</strong> – structure for which contours to be converted to mask</p></li>
<li><p><strong>margin_mm</strong> – expand the contours in mm. defaults to None. If it is not none, it will expand the contours</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="portpy.photon.influence_matrix.InfluenceMatrix.create_beamlet_idx_2d_grid">
<span class="sig-name descname"><span class="pre">create_beamlet_idx_2d_grid</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ind</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">ndarray</span></span></span><a class="reference internal" href="_modules/portpy/photon/influence_matrix.html#InfluenceMatrix.create_beamlet_idx_2d_grid"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#portpy.photon.influence_matrix.InfluenceMatrix.create_beamlet_idx_2d_grid" title="Permalink to this definition"></a></dt>
<dd><p>Create beamlet idx in 2d grid of 2.5mm resolution. i.e. each element in matrix is 2.5mm*2.5mm</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>ind</strong> – indices for the beam in beamlets dictionary</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="portpy.photon.influence_matrix.InfluenceMatrix.dose_1d_to_3d">
<span class="sig-name descname"><span class="pre">dose_1d_to_3d</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">sol</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">dict</span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dose_1d</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">array</span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">ndarray</span></span></span><a class="reference internal" href="_modules/portpy/photon/influence_matrix.html#InfluenceMatrix.dose_1d_to_3d"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#portpy.photon.influence_matrix.InfluenceMatrix.dose_1d_to_3d" title="Permalink to this definition"></a></dt>
<dd><p>Create 3d dose_1d from dose_1d in 1d voxels. 3d array have same resolution as CT</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>sol</strong> – solution dictionary from optimization</p></li>
<li><p><strong>dose_1d</strong> – dose_1d in 1d. Optional</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>dose_1d in 3d</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="portpy.photon.influence_matrix.InfluenceMatrix.dose_3d_to_1d">
<span class="sig-name descname"><span class="pre">dose_3d_to_1d</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dose_3d</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">ndarray</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">array</span></span></span><a class="reference internal" href="_modules/portpy/photon/influence_matrix.html#InfluenceMatrix.dose_3d_to_1d"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#portpy.photon.influence_matrix.InfluenceMatrix.dose_3d_to_1d" title="Permalink to this definition"></a></dt>
<dd><p>Get dose_1d in 1d voxels for the given influence matrix from 3d dose_1d</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>dose_3d</strong> – 3d dose_1d</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>dose_1d in 1d voxel indices</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="portpy.photon.influence_matrix.InfluenceMatrix.down_sample_2d_grid">
<span class="sig-name descname"><span class="pre">down_sample_2d_grid</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ind</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">beamlet_width_mm</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">5.0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">beamlet_height_mm</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">5.0</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">ndarray</span></span></span><a class="reference internal" href="_modules/portpy/photon/influence_matrix.html#InfluenceMatrix.down_sample_2d_grid"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#portpy.photon.influence_matrix.InfluenceMatrix.down_sample_2d_grid" title="Permalink to this definition"></a></dt>
<dd><p>create down sample beam map based on beamlet width and height</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>ind</strong> – indices for the beam in beamlets dictionary</p></li>
<li><p><strong>beamlet_width_mm</strong> – </p></li>
<li><p><strong>beamlet_height_mm</strong> – </p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>down sampled 2d grid</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="portpy.photon.influence_matrix.InfluenceMatrix.down_sample_voxels">
<span class="sig-name descname"><span class="pre">down_sample_voxels</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">down_sample_xyz</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">int</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/portpy/photon/influence_matrix.html#InfluenceMatrix.down_sample_voxels"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#portpy.photon.influence_matrix.InfluenceMatrix.down_sample_voxels" title="Permalink to this definition"></a></dt>
<dd><p>This method creates new ct to dose_1d voxel map array based on down sampled voxels.
It also outputs map between down sampled voxel indices to original voxel indices for down sampling influence matrix
:param down_sample_xyz: It down-samples optimization voxels as factor of ct resolution</p>
<blockquote>
<div><p>e.g. down_sample_xyz = [5,5,1]. It will down-sample optimization voxels with 5 * ct res. in x direction, 5 * ct res. in y direction and 1*ct res. in z direction.
defaults to None. When None it will use the original optimization voxel resolution.</p>
</div></blockquote>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>voxel map(list containing map between down-sampled indices to original indices), voxel weight (weighted average of voxels in down sample
and ct to dose_1d voxel map</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="portpy.photon.influence_matrix.InfluenceMatrix.fluence_1d_to_2d">
<span class="sig-name descname"><span class="pre">fluence_1d_to_2d</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">fluence_1d</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">array</span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sol</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">dict</span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">ndarray</span><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="_modules/portpy/photon/influence_matrix.html#InfluenceMatrix.fluence_1d_to_2d"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#portpy.photon.influence_matrix.InfluenceMatrix.fluence_1d_to_2d" title="Permalink to this definition"></a></dt>
<dd><p>Create 2d fluence maps from vector of intensities.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>fluence_1d</strong> – 2d fluence as vector</p></li>
<li><p><strong>sol</strong> – solution from optimization</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>2d fluence as a list for each beam</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="portpy.photon.influence_matrix.InfluenceMatrix.fluence_2d_to_1d">
<span class="sig-name descname"><span class="pre">fluence_2d_to_1d</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">fluence_2d</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">ndarray</span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">array</span></span></span><a class="reference internal" href="_modules/portpy/photon/influence_matrix.html#InfluenceMatrix.fluence_2d_to_1d"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#portpy.photon.influence_matrix.InfluenceMatrix.fluence_2d_to_1d" title="Permalink to this definition"></a></dt>
<dd><p>Create vector of intensities from 2d fluence maps</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>fluence_2d</strong> – 2d fluence as list of nd array with same length as number of beams_dict</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>fluence in 1d for beamlet indices</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="portpy.photon.influence_matrix.InfluenceMatrix.get_all_beam_ids">
<span class="sig-name descname"><span class="pre">get_all_beam_ids</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">int</span><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="_modules/portpy/photon/influence_matrix.html#InfluenceMatrix.get_all_beam_ids"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#portpy.photon.influence_matrix.InfluenceMatrix.get_all_beam_ids" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="portpy.photon.influence_matrix.InfluenceMatrix.get_beamlet_info">
<span class="sig-name descname"><span class="pre">get_beamlet_info</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">col_number</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">dict</span></span></span><a class="reference internal" href="_modules/portpy/photon/influence_matrix.html#InfluenceMatrix.get_beamlet_info"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#portpy.photon.influence_matrix.InfluenceMatrix.get_beamlet_info" title="Permalink to this definition"></a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>col_number</strong> – col number/beamlet number in influence matrix</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>dictionary containing information about the beamlet</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="portpy.photon.influence_matrix.InfluenceMatrix.get_bev_2d_grid">
<span class="sig-name descname"><span class="pre">get_bev_2d_grid</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">beam_id</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">Union</span><span class="p"><span class="pre">[</span></span><span class="pre">int</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">int</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ind</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">int</span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">finest_grid</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Union</span><span class="p"><span class="pre">[</span></span><span class="pre">ndarray</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">ndarray</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="_modules/portpy/photon/influence_matrix.html#InfluenceMatrix.get_bev_2d_grid"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#portpy.photon.influence_matrix.InfluenceMatrix.get_bev_2d_grid" title="Permalink to this definition"></a></dt>
<dd><p>get BEV in 2d grid in original resolution where beamlet index is the column number in influence matrix</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>ind</strong> – idx of the beam in beamlets_dict.</p>
</dd>
</dl>
<p>It can be int or List[int]. If int, ndarray is return, If List[int], list[ndarray] is returned
:param beam_id: beam_id of the beam.
It can be int or List[int]. If int, ndarray is return, If List[int], list[ndarray] is returned
:param finest_grid:Default to False. If set to true, it will return 2d grid in finest resolution
:return: ndarray/List[ndarray]</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="portpy.photon.influence_matrix.InfluenceMatrix.get_influence_matrix">
<span class="sig-name descname"><span class="pre">get_influence_matrix</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">plan</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">is_full</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/portpy/photon/influence_matrix.html#InfluenceMatrix.get_influence_matrix"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#portpy.photon.influence_matrix.InfluenceMatrix.get_influence_matrix" title="Permalink to this definition"></a></dt>
<dd><p>Load influence matrix based on the beamlets and voxels.
:param plan: object of class Plan
:param is_full: get full or sparse matrix. Default to True.
:return: full or sparse matrix</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="portpy.photon.influence_matrix.InfluenceMatrix.get_opt_voxels_idx">
<span class="sig-name descname"><span class="pre">get_opt_voxels_idx</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">structure_name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">ndarray</span></span></span><a class="reference internal" href="_modules/portpy/photon/influence_matrix.html#InfluenceMatrix.get_opt_voxels_idx"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#portpy.photon.influence_matrix.InfluenceMatrix.get_opt_voxels_idx" title="Permalink to this definition"></a></dt>
<dd><p>Get voxel index for structure
:param structure_name: name of the structure in plan
:return: voxel indexes for the structure</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="portpy.photon.influence_matrix.InfluenceMatrix.get_opt_voxels_size">
<span class="sig-name descname"><span class="pre">get_opt_voxels_size</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">structure_name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/portpy/photon/influence_matrix.html#InfluenceMatrix.get_opt_voxels_size"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#portpy.photon.influence_matrix.InfluenceMatrix.get_opt_voxels_size" title="Permalink to this definition"></a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>structure_name</strong> – name of the structure in plan</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>voxel size for the structure</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="portpy.photon.influence_matrix.InfluenceMatrix.get_orig_res_2d_grid">
<span class="sig-name descname"><span class="pre">get_orig_res_2d_grid</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ind</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">ndarray</span></span></span><a class="reference internal" href="_modules/portpy/photon/influence_matrix.html#InfluenceMatrix.get_orig_res_2d_grid"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#portpy.photon.influence_matrix.InfluenceMatrix.get_orig_res_2d_grid" title="Permalink to this definition"></a></dt>
<dd><p>Create beam map 2d grid in the original resolution where each element in matrix is the size of respective beamlet.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>ind</strong> – indices for the beam in beamlets dictionary</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>beam map 2d grid in original resolution</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="portpy.photon.influence_matrix.InfluenceMatrix.get_voxel_info">
<span class="sig-name descname"><span class="pre">get_voxel_info</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">row_number</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/portpy/photon/influence_matrix.html#InfluenceMatrix.get_voxel_info"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#portpy.photon.influence_matrix.InfluenceMatrix.get_voxel_info" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="portpy.photon.influence_matrix.InfluenceMatrix.plot_fluence_2d">
<span class="sig-name descname"><span class="pre">plot_fluence_2d</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">beam_id</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">optimal_fluence_2d</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">ndarray</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sol</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">dict</span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">options</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="reference internal" href="_modules/portpy/photon/influence_matrix.html#InfluenceMatrix.plot_fluence_2d"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#portpy.photon.influence_matrix.InfluenceMatrix.plot_fluence_2d" title="Permalink to this definition"></a></dt>
<dd><p>Displays fluence in 2d for the given beam_id</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>optimal_fluence_2d</strong> – </p></li>
<li><p><strong>beam_id</strong> – beam_id of the beam</p></li>
<li><p><strong>sol</strong> – solution dictionary after optimization</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>2d optimal fluence plot</p>
</dd>
<dt class="field-odd">Example<span class="colon">:</span></dt>
<dd class="field-odd"><p></p></dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">Visualization</span><span class="o">.</span><span class="n">plot_fluence_2d</span><span class="p">(</span><span class="n">beam_id</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">sol</span><span class="o">=</span><span class="n">sol</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="portpy.photon.influence_matrix.InfluenceMatrix.plot_fluence_3d">
<span class="sig-name descname"><span class="pre">plot_fluence_3d</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">beam_id</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">optimal_fluence_2d</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">ndarray</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sol</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">dict</span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">options</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="reference internal" href="_modules/portpy/photon/influence_matrix.html#InfluenceMatrix.plot_fluence_3d"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#portpy.photon.influence_matrix.InfluenceMatrix.plot_fluence_3d" title="Permalink to this definition"></a></dt>
<dd><p>Displays fluence in 3d for the given beam_id</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>optimal_fluence_2d</strong> – </p></li>
<li><p><strong>sol</strong> – solution after optimization</p></li>
<li><p><strong>beam_id</strong> – beam_id of the beam</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>3d optimal fluence plot</p>
</dd>
<dt class="field-odd">Example<span class="colon">:</span></dt>
<dd class="field-odd"><p></p></dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">Visualization</span><span class="o">.</span><span class="n">plot_fluence_3d</span><span class="p">(</span><span class="n">beam_id</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">sol</span><span class="o">=</span><span class="n">sol</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="portpy.photon.influence_matrix.InfluenceMatrix.pre_process_voxels">
<span class="sig-name descname"><span class="pre">pre_process_voxels</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">plan_obj</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/portpy/photon/influence_matrix.html#InfluenceMatrix.pre_process_voxels"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#portpy.photon.influence_matrix.InfluenceMatrix.pre_process_voxels" title="Permalink to this definition"></a></dt>
<dd><p>Updates opt_voxels_dict based upon ct to dose_1d voxel map</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>plan_obj</strong> – object if class Plan</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="portpy.photon.influence_matrix.InfluenceMatrix.preprocess_beams">
<span class="sig-name descname"><span class="pre">preprocess_beams</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">plan_obj</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">structure</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'PTV'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">remove_corner_beamlets</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/portpy/photon/influence_matrix.html#InfluenceMatrix.preprocess_beams"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#portpy.photon.influence_matrix.InfluenceMatrix.preprocess_beams" title="Permalink to this definition"></a></dt>
<dd><p>Preprocess beams to create beamlets dictionary based on beamlet resolution.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>plan_obj</strong> – object of class Plan</p></li>
<li><p><strong>structure</strong> – projection of the structure on BEV for which beamlets to be considered for creating influence matrix. defaults to PTV</p></li>
<li><p><strong>remove_corner_beamlets</strong> – If remove corner beamlet is true, it will remove the corner beamlets during down sampling.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>beamlets for processing influence matrix</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="portpy.photon.influence_matrix.InfluenceMatrix.set_opt_voxel_idx">
<span class="sig-name descname"><span class="pre">set_opt_voxel_idx</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">plan_obj</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">structure_name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="reference internal" href="_modules/portpy/photon/influence_matrix.html#InfluenceMatrix.set_opt_voxel_idx"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#portpy.photon.influence_matrix.InfluenceMatrix.set_opt_voxel_idx" title="Permalink to this definition"></a></dt>
<dd><p>Set opt_voxel_idx for the structure based upon ct_dose_voxel_map and structure mask</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>plan_obj</strong> – object of class Plan</p></li>
<li><p><strong>structure_name</strong> – structure name</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>set the voxel idx in opt_voxels_dict for the structure</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="portpy.photon.influence_matrix.InfluenceMatrix.sort_beamlets">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">sort_beamlets</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">b_map</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/portpy/photon/influence_matrix.html#InfluenceMatrix.sort_beamlets"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#portpy.photon.influence_matrix.InfluenceMatrix.sort_beamlets" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="portpy.photon.influence_matrix.InfluenceMatrix.surface_plot">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">surface_plot</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">matrix</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ax</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">figsize</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">(8,</span> <span class="pre">8)</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/portpy/photon/influence_matrix.html#InfluenceMatrix.surface_plot"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#portpy.photon.influence_matrix.InfluenceMatrix.surface_plot" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

</dd></dl>

</section>
<section id="module-portpy.photon.optimization">
<span id="portpy-photon-optimization-module"></span><h2>portpy.photon.optimization module<a class="headerlink" href="#module-portpy.photon.optimization" title="Permalink to this heading"></a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="portpy.photon.optimization.Optimization">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">portpy.photon.optimization.</span></span><span class="sig-name descname"><span class="pre">Optimization</span></span><a class="reference internal" href="_modules/portpy/photon/optimization.html#Optimization"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#portpy.photon.optimization.Optimization" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Optimization class for optimizing and creating the plan</p>
<dl class="py method">
<dt class="sig sig-object py" id="portpy.photon.optimization.Optimization.create_rinds">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">create_rinds</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">my_plan</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">inf_matrix</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">size_mm</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">list</span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">base_structure</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'PTV'</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/portpy/photon/optimization.html#Optimization.create_rinds"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#portpy.photon.optimization.Optimization.create_rinds" title="Permalink to this definition"></a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>inf_matrix</strong> – object of class inf_matrix</p></li>
<li><p><strong>my_plan</strong> – object of class Plan</p></li>
<li><p><strong>size_mm</strong> – size in mm. default size = [5,5,20,30, inf]. It means rind_0 is 5mm after PTV, rind_2 is 5 mm after rind_1, and so on..</p></li>
<li><p><strong>base_structure</strong> – structure from which rinds should be created</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>save rinds to plan object</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="portpy.photon.optimization.Optimization.get_smoothness_matrix">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">get_smoothness_matrix</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">beamReq</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">dict</span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/portpy/photon/optimization.html#Optimization.get_smoothness_matrix"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#portpy.photon.optimization.Optimization.get_smoothness_matrix" title="Permalink to this definition"></a></dt>
<dd><p>Create smoothness matrix so that adjacent beamlets are smooth out to reduce MU</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>beamReq</strong> – beamlets dictionary from the object of influence matrix class</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>tuple(Qx, Qy) where
Qx: first matrix have values 1 and -1 for neighbouring beamlets in X direction
Qy: second matrix with values 1 and -1 for neighbouring beamlets in Y direction</p>
</dd>
<dt class="field-odd">Example<span class="colon">:</span></dt>
<dd class="field-odd"><p></p></dd>
</dl>
<dl class="simple">
<dt>Qx = [[1 -1 0 0 0 0]</dt><dd><p>[0 0 1 -1 0 0]
[0 0 0 0 1 -1]]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="portpy.photon.optimization.Optimization.matching_keys">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">matching_keys</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dictionary</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">search_string</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/portpy/photon/optimization.html#Optimization.matching_keys"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#portpy.photon.optimization.Optimization.matching_keys" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="portpy.photon.optimization.Optimization.run_IMRT_fluence_map_CVXPy">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">run_IMRT_fluence_map_CVXPy</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">my_plan</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="#portpy.photon.plan.Plan" title="portpy.photon.plan.Plan"><span class="pre">Plan</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">inf_matrix</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="#portpy.photon.influence_matrix.InfluenceMatrix" title="portpy.photon.influence_matrix.InfluenceMatrix"><span class="pre">InfluenceMatrix</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">solver</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'MOSEK'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">verbose</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cvxpy_options</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">opt_params</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">dict</span></span></span><a class="reference internal" href="_modules/portpy/photon/optimization.html#Optimization.run_IMRT_fluence_map_CVXPy"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#portpy.photon.optimization.Optimization.run_IMRT_fluence_map_CVXPy" title="Permalink to this definition"></a></dt>
<dd><p>It runs optimization to create optimal plan based upon clinical criteria</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>my_plan</strong> – object of class Plan</p></li>
<li><p><strong>inf_matrix</strong> – object of class InfluenceMatrix</p></li>
<li><p><strong>solver</strong> – default solver ‘MOSEK’. check cvxpy website for available solvers</p></li>
<li><p><strong>verbose</strong> – Default to True. If set to False, it will not print the solver iterations.</p></li>
<li><p><strong>cvxpy_options</strong> – cvxpy and the solver settings</p></li>
<li><p><strong>opt_params</strong> – optimization parameters for modifying parameters of problem statement</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><p>returns the solution dictionary in format of:
dict: {</p>
<blockquote>
<div><blockquote>
<div><p>’optimal_intensity’: list(float),
‘dose_1d’: list(float),
‘inf_matrix’: Pointer to object of InfluenceMatrix }</p>
</div></blockquote>
<p>}</p>
</div></blockquote>
</p>
</dd>
<dt class="field-odd">Example<span class="colon">:</span></dt>
<dd class="field-odd"><p></p></dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">Optimization</span><span class="o">.</span><span class="n">run_IMRT_fluence_map_CVXPy</span><span class="p">(</span><span class="n">my_plan</span><span class="o">=</span><span class="n">my_plan</span><span class="p">,</span><span class="n">inf_matrix</span><span class="o">=</span><span class="n">inf_matrix</span><span class="p">,</span><span class="n">solver</span><span class="o">=</span><span class="s1">&#39;MOSEK&#39;</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="portpy.photon.optimization.Optimization.run_IMRT_fluence_map_CVXPy_BOO_benchmark">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">run_IMRT_fluence_map_CVXPy_BOO_benchmark</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">my_plan</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">inf_matrix</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">num_beams</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">7</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">solver</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'MOSEK'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">verbose</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cvxpy_options</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">dict</span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">opt_params</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/portpy/photon/optimization.html#Optimization.run_IMRT_fluence_map_CVXPy_BOO_benchmark"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#portpy.photon.optimization.Optimization.run_IMRT_fluence_map_CVXPy_BOO_benchmark" title="Permalink to this definition"></a></dt>
<dd><p>Creates MIP problem for selecting optimal beam angles</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>inf_matrix</strong> – object of class InfluenceMatrix</p></li>
<li><p><strong>my_plan</strong> – object of class Plan</p></li>
<li><p><strong>solver</strong> – default solver ‘MOSEK’. check cvxpy website for available solvers.</p></li>
<li><p><strong>num_beams</strong> – Default to 7. Numbers of beams to be selected from the pool of beams</p></li>
<li><p><strong>verbose</strong> – Default to True. If set to False, it will not print the solver iterations.</p></li>
<li><p><strong>cvxpy_options</strong> – cvxpy and the solver settings</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>save optimal solution to plan object called opt_sol</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="portpy.photon.optimization.Optimization.run_IMRT_fluence_map_CVXPy_dvh_benchmark">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">run_IMRT_fluence_map_CVXPy_dvh_benchmark</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">my_plan</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="#portpy.photon.plan.Plan" title="portpy.photon.plan.Plan"><span class="pre">Plan</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">inf_matrix</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="#portpy.photon.influence_matrix.InfluenceMatrix" title="portpy.photon.influence_matrix.InfluenceMatrix"><span class="pre">InfluenceMatrix</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dvh_criteria</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">dict</span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">solver</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'MOSEK'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">verbose</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cvxpy_options</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">opt_params</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">dict</span></span></span><a class="reference internal" href="_modules/portpy/photon/optimization.html#Optimization.run_IMRT_fluence_map_CVXPy_dvh_benchmark"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#portpy.photon.optimization.Optimization.run_IMRT_fluence_map_CVXPy_dvh_benchmark" title="Permalink to this definition"></a></dt>
<dd><p>Add dvh constraints and solve the optimization for getting ground truth solution</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>inf_matrix</strong> – object of class InfluenceMatrix</p></li>
<li><p><strong>my_plan</strong> – object of class Plan</p></li>
<li><p><strong>solver</strong> – default solver ‘MOSEK’. check cvxpy website for available solvers</p></li>
<li><p><strong>dvh_criteria</strong> – dvh criteria to be met in optimization. Defaults to None.</p></li>
</ul>
</dd>
</dl>
<p>If None, it will optimize for all the dvh criteria in clinical criteria.
:param verbose: Default to True. If set to False, it will not print the solver iterations.
:param cvxpy_options: cvxpy and the solver settings
:return: save optimal solution to plan object called opt_sol</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="portpy.photon.optimization.Optimization.set_rinds_opt_voxel_idx">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">set_rinds_opt_voxel_idx</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">plan_obj</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="#portpy.photon.plan.Plan" title="portpy.photon.plan.Plan"><span class="pre">Plan</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">inf_matrix</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="#portpy.photon.influence_matrix.InfluenceMatrix" title="portpy.photon.influence_matrix.InfluenceMatrix"><span class="pre">InfluenceMatrix</span></a></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/portpy/photon/optimization.html#Optimization.set_rinds_opt_voxel_idx"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#portpy.photon.optimization.Optimization.set_rinds_opt_voxel_idx" title="Permalink to this definition"></a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>plan_obj</strong> – object of class plan</p></li>
<li><p><strong>inf_matrix</strong> – object of class influence matrix</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>set rinds index based upon the influence matrix</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</section>
<section id="module-portpy.photon.plan">
<span id="portpy-photon-plan-module"></span><h2>portpy.photon.plan module<a class="headerlink" href="#module-portpy.photon.plan" title="Permalink to this heading"></a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="portpy.photon.plan.Plan">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">portpy.photon.plan.</span></span><span class="sig-name descname"><span class="pre">Plan</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">patient_id</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">data_dir</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">beam_ids</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">int</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">opt_beamlets_PTV_margin_mm</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">3</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">load_inf_matrix_full</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">protocol_name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'Lung_Default_2Gy_30Fr'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">protocol_type</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'Default'</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/portpy/photon/plan.html#Plan"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#portpy.photon.plan.Plan" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>A class representing a plan</p>
<ul>
<li><p><strong>Attributes</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">:</span><span class="n">param</span> <span class="n">opt_beamlets_PTV_margin_mm</span><span class="p">:</span> <span class="n">For</span> <span class="n">each</span> <span class="n">beam</span><span class="p">,</span> <span class="n">we</span> <span class="n">often</span> <span class="n">only</span> <span class="n">include</span> <span class="n">the</span> <span class="n">beamlets</span> <span class="n">that</span> <span class="n">are</span> <span class="n">within</span>
    <span class="n">few</span> <span class="n">millimetres</span> <span class="n">of</span> <span class="n">the</span> <span class="n">projection</span> <span class="n">of</span> <span class="n">the</span> <span class="n">PTV</span> <span class="p">(</span><span class="n">tumor</span><span class="p">)</span> <span class="n">into</span> <span class="n">that</span> <span class="n">beam</span><span class="o">.</span> <span class="n">It</span> <span class="ow">is</span> <span class="n">because</span> <span class="n">the</span> <span class="n">beamlets</span>
    <span class="n">that</span> <span class="n">are</span> <span class="n">far</span> <span class="kn">from</span> <span class="nn">the</span> <span class="n">PTV</span> <span class="n">projection</span> <span class="n">mainly</span> <span class="n">deliver</span> <span class="n">radiation</span> <span class="n">to</span> <span class="n">the</span> <span class="n">healthy</span> <span class="n">tissues</span> <span class="ow">not</span> <span class="n">PTV</span><span class="o">.</span> <span class="n">Default</span> <span class="ow">is</span> <span class="mi">3</span><span class="n">mm</span>
<span class="p">:</span><span class="nb">type</span> <span class="n">opt_beamlets_PTV_margin_mm</span><span class="p">:</span> <span class="nb">int</span>
<span class="p">:</span><span class="n">param</span> <span class="n">beams_dict</span><span class="p">:</span> <span class="n">an</span> <span class="nb">object</span> <span class="n">of</span> <span class="k">class</span> <span class="nc">Beams</span> <span class="n">that</span> <span class="n">contains</span> <span class="n">information</span> <span class="n">about</span> <span class="n">the</span> <span class="n">beams_dict</span> <span class="n">used</span> <span class="ow">in</span> <span class="n">the</span> <span class="n">treatment</span> <span class="n">plan</span><span class="o">.</span>
<span class="p">:</span><span class="nb">type</span> <span class="n">beams</span><span class="p">:</span> <span class="nb">object</span>
<span class="p">:</span><span class="n">param</span> <span class="n">structures</span><span class="p">:</span> <span class="n">an</span> <span class="nb">object</span> <span class="n">of</span> <span class="k">class</span> <span class="nc">Structures</span> <span class="n">that</span> <span class="n">contains</span> <span class="n">information</span> <span class="n">about</span> <span class="n">the</span> <span class="n">structures</span> <span class="n">present</span> <span class="ow">in</span> <span class="n">the</span> <span class="n">patient</span><span class="s1">&#39;s CT scan.</span>
<span class="p">:</span><span class="nb">type</span> <span class="n">structures</span><span class="p">:</span> <span class="nb">object</span>
<span class="p">:</span><span class="n">param</span> <span class="n">inf_matrix</span><span class="p">:</span> <span class="nb">object</span> <span class="n">of</span> <span class="k">class</span> <span class="nc">Influence</span> <span class="n">matrix</span>
<span class="p">:</span><span class="nb">type</span> <span class="n">inf_matrix</span><span class="p">:</span> <span class="nb">object</span>
<span class="p">:</span><span class="n">param</span> <span class="n">clinial_criteria</span><span class="p">:</span> <span class="n">an</span> <span class="nb">object</span> <span class="n">of</span> <span class="k">class</span> <span class="nc">ClincialCriteria</span> <span class="n">that</span> <span class="n">contains</span> <span class="n">information</span> <span class="n">about</span> <span class="n">the</span> <span class="n">goals</span> <span class="ow">and</span> <span class="n">constraints</span> <span class="n">of</span> <span class="n">the</span> <span class="n">treatment</span> <span class="n">plan</span>
<span class="p">:</span><span class="nb">type</span> <span class="n">inf_matrix</span><span class="p">:</span> <span class="nb">object</span>
<span class="p">:</span><span class="n">param</span> <span class="n">ct</span><span class="p">:</span> <span class="n">dictionary</span> <span class="n">containing</span> <span class="n">ct</span> <span class="n">metadata</span><span class="o">.</span> <span class="n">It</span> <span class="n">includes</span> <span class="n">metadata</span> <span class="n">about</span> <span class="n">important</span> <span class="n">ct</span> <span class="n">parameters</span> <span class="n">like</span> <span class="n">resolution</span><span class="p">,</span> <span class="n">ct</span> <span class="ow">in</span> <span class="n">HU</span> <span class="n">etc</span><span class="o">.</span>
<span class="p">:</span><span class="nb">type</span> <span class="n">ct</span><span class="p">:</span> <span class="nb">dict</span>
</pre></div>
</div>
</li>
<li><p><strong>Methods</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>:create_inf_matrix(beamlet_width_mm, beamlet_height_mm,
                  down_sample_xyz):
    Create object of Influence Matrix class
:get_prescription():
    Return prescription for the plan
:get_num_of_fractions()
    Return number of fractions for the plan
</pre></div>
</div>
</li>
</ul>
<dl class="py method">
<dt class="sig sig-object py" id="portpy.photon.plan.Plan.add_rinds">
<span class="sig-name descname"><span class="pre">add_rinds</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">rind_params</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">dict</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">inf_matrix</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/portpy/photon/plan.html#Plan.add_rinds"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#portpy.photon.plan.Plan.add_rinds" title="Permalink to this definition"></a></dt>
<dd><p>Example for
rind_params = [{‘rind_name’: ‘RIND_0’, ‘ref_structure’: ‘PTV, ‘margin_start_mm’: 2, ‘margin_end_mm’: 10, ‘max_dose_gy’: 10}]</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>rind_params</strong> – rind_params as dictionary</p></li>
<li><p><strong>inf_matrix</strong> – object of class inf_matrix</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>save rinds to plan object</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="portpy.photon.plan.Plan.create_inf_matrix">
<span class="sig-name descname"><span class="pre">create_inf_matrix</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">beamlet_width_mm</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">2.5</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">beamlet_height_mm</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">2.5</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">opt_vox_xyz_res_mm</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">float</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">structure</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'PTV'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">is_full</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#portpy.photon.influence_matrix.InfluenceMatrix" title="portpy.photon.influence_matrix.InfluenceMatrix"><span class="pre">InfluenceMatrix</span></a></span></span><a class="reference internal" href="_modules/portpy/photon/plan.html#Plan.create_inf_matrix"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#portpy.photon.plan.Plan.create_inf_matrix" title="Permalink to this definition"></a></dt>
<dd><p>Create a influence matrix object for Influence Matrix class</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>is_full</strong> – Defaults to False. If True, it will create full influence matrix</p></li>
<li><p><strong>beamlet_width_mm</strong> – beamlet width in mm. It should be multiple of 2.5, defaults to 2.5</p></li>
<li><p><strong>beamlet_height_mm</strong> – beamlet height in mm. It should be multiple of 2.5, defaults to 2.5</p></li>
<li><p><strong>structure</strong> – target structure for creating BEV beamlets, defaults to ‘PTV’</p></li>
<li><p><strong>opt_vox_xyz_res_mm</strong> – It down-samples optimization voxels as factor of ct resolution
e.g. opt_vox_xyz_res = [5*ct.res.x,5*ct.res.y,1*ct.res.z]. It will down-sample optimization voxels with 5 * ct res. in x direction, 5 * ct res. in y direction and 1*ct res. in z direction.
defaults to None. When None it will use the original optimization voxel resolution.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>object of influence Matrix class</p>
</dd>
<dt class="field-odd">Example<span class="colon">:</span></dt>
<dd class="field-odd"><p></p></dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">inf_matrix</span> <span class="o">=</span> <span class="n">my_plan</span><span class="o">.</span><span class="n">create_inf_matrix</span><span class="p">(</span><span class="n">beamlet_width_mm</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">beamlet_height_mm</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">opt_vox_xyz_res_mm</span><span class="o">=</span><span class="p">[</span><span class="mi">5</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">1</span><span class="p">],</span> <span class="n">structure</span><span class="o">=</span><span class="n">structure</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="portpy.photon.plan.Plan.get_ct_res_xyz_mm">
<span class="sig-name descname"><span class="pre">get_ct_res_xyz_mm</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">float</span><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="_modules/portpy/photon/plan.html#Plan.get_ct_res_xyz_mm"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#portpy.photon.plan.Plan.get_ct_res_xyz_mm" title="Permalink to this definition"></a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>number of fractions to be delivered</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="portpy.photon.plan.Plan.get_disease_site">
<span class="sig-name descname"><span class="pre">get_disease_site</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">float</span></span></span><a class="reference internal" href="_modules/portpy/photon/plan.html#Plan.get_disease_site"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#portpy.photon.plan.Plan.get_disease_site" title="Permalink to this definition"></a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>number of fractions to be delivered</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="portpy.photon.plan.Plan.get_num_of_fractions">
<span class="sig-name descname"><span class="pre">get_num_of_fractions</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">float</span></span></span><a class="reference internal" href="_modules/portpy/photon/plan.html#Plan.get_num_of_fractions"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#portpy.photon.plan.Plan.get_num_of_fractions" title="Permalink to this definition"></a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>number of fractions to be delivered</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="portpy.photon.plan.Plan.get_plan_beams">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">get_plan_beams</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">beam_ids</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">int</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">meta_data</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">dict</span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">dict</span></span></span><a class="reference internal" href="_modules/portpy/photon/plan.html#Plan.get_plan_beams"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#portpy.photon.plan.Plan.get_plan_beams" title="Permalink to this definition"></a></dt>
<dd><p>Create and return a copy of meta_data with only including the requested beams_dict (beam_ids)</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>beam_ids</strong> – the indices of the beams_dict to be included. If None, the planner’s beams_dict are used</p></li>
<li><p><strong>meta_data</strong> – the dictionary including all the beams_dict</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><p>returns the meta_data dictionary only including the requested beams_dict in format of:
dict: {</p>
<blockquote>
<div><blockquote>
<div><p>’structures’: {‘name’: list(str), ‘volume_cc’: list(float), }
‘opt_voxels’: {‘_ct_voxel_resolution_xyz_mm’: list(float),}</p>
</div></blockquote>
<p>}</p>
</div></blockquote>
</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="portpy.photon.plan.Plan.get_prescription">
<span class="sig-name descname"><span class="pre">get_prescription</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">float</span></span></span><a class="reference internal" href="_modules/portpy/photon/plan.html#Plan.get_prescription"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#portpy.photon.plan.Plan.get_prescription" title="Permalink to this definition"></a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>prescription in Gy</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="portpy.photon.plan.Plan.load_optimal_sol">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">load_optimal_sol</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">sol_name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">path</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">dict</span></span></span><a class="reference internal" href="_modules/portpy/photon/plan.html#Plan.load_optimal_sol"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#portpy.photon.plan.Plan.load_optimal_sol" title="Permalink to this definition"></a></dt>
<dd><p>Load optimal solution dictionary got from optimization</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>sol_name</strong> – name of the optimal solution to be loaded.</p></li>
<li><p><strong>path</strong> – if path is set, plan object will be load from path directory else current directory</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>load solution</p>
</dd>
<dt class="field-odd">Example<span class="colon">:</span></dt>
<dd class="field-odd"><p></p></dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">sol</span> <span class="o">=</span> <span class="n">Plan</span><span class="o">.</span><span class="n">load_optimal_sol</span><span class="p">(</span><span class="n">sol_name</span><span class="o">=</span><span class="s1">&#39;sol&#39;</span><span class="p">,</span> <span class="n">path</span><span class="o">=</span><span class="sa">r</span><span class="s1">&#39;path/for/loading_sol&#39;</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="portpy.photon.plan.Plan.load_plan">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">load_plan</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">plan_name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">path</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/portpy/photon/plan.html#Plan.load_plan"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#portpy.photon.plan.Plan.load_plan" title="Permalink to this definition"></a></dt>
<dd><p>Load pickle file of the plan object.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>plan_name</strong> – plan_name of the object of class Plan. It None, it will try to look for plan name called ‘my_plan’</p></li>
<li><p><strong>path</strong> – if path is set, plan object will be load from path directory else current project directory</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>load pickled object of class Plan</p>
</dd>
<dt class="field-odd">Example<span class="colon">:</span></dt>
<dd class="field-odd"><p></p></dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">Plan</span><span class="o">.</span><span class="n">load_plan</span><span class="p">(</span><span class="n">plan_name</span><span class="o">=</span><span class="s1">&#39;my_plan&#39;</span><span class="p">,</span> <span class="n">path</span><span class="o">=</span><span class="sa">r</span><span class="s2">&quot;path/for/loading_plan&quot;</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="portpy.photon.plan.Plan.plot_dvh">
<span class="sig-name descname"><span class="pre">plot_dvh</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">sol</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dose_1d=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">structs=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dose_scale:</span> <span class="pre">typing_extensions.Literal[Absolute(Gy)</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">Relative(%)]</span> <span class="pre">=</span> <span class="pre">'Absolute(Gy)'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">volume_scale:</span> <span class="pre">typing_extensions.Literal[Absolute(cc)</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">Relative(%)]</span> <span class="pre">=</span> <span class="pre">'Relative(%)'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">**options</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/portpy/photon/plan.html#Plan.plot_dvh"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#portpy.photon.plan.Plan.plot_dvh" title="Permalink to this definition"></a></dt>
<dd><p>Create dvh plot for the selected structures</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>sol</strong> – optimal sol dictionary</p></li>
<li><p><strong>dose_1d</strong> – dose_1d in 1d voxels</p></li>
<li><p><strong>structs</strong> – structures to be included in dvh plot</p></li>
<li><p><strong>volume_scale</strong> – volume scale on y-axis. Default= Absolute(cc). e.g. volume_scale = “Absolute(cc)” or volume_scale = “Relative(%)”</p></li>
<li><p><strong>dose_scale</strong> – dose_1d scale on x axis. Default= Absolute(Gy). e.g. dose_scale = “Absolute(Gy)” or dose_scale = “Relative(%)”</p></li>
</ul>
</dd>
<dt class="field-even">Keyword Arguments<span class="colon">:</span></dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>(</strong><strong>str</strong><strong>)</strong> (<em>style</em>) – line style for dvh curve. default “solid”. can be “dotted”, “dash-dotted”.</p></li>
<li><p><strong>(</strong><strong>int</strong><strong>)</strong> (<em>width</em>) – width of line. Default 2</p></li>
<li><p><strong>colors</strong><strong>(</strong><strong>list</strong><strong>)</strong> – list of colors</p></li>
<li><p><strong>legend_font_size</strong> – Set legend_font_size. default 10</p></li>
<li><p><strong>figsize</strong> – Set figure size for the plot. Default figure size (12,8)</p></li>
<li><p><strong>create_fig</strong> – Create a new figure. Default True. If False, append to the previous figure</p></li>
<li><p><strong>title</strong> – Title for the figure</p></li>
<li><p><strong>filename</strong> – Name of the file to save the figure in current directory</p></li>
<li><p><strong>show</strong> – Show the figure. Default is True. If false, next plot can be append to it</p></li>
<li><p><strong>norm_flag</strong> – Use to normalize the plan. Default is False.</p></li>
<li><p><strong>norm_volume</strong> – Use to set normalization volume. default is 90 percentile.</p></li>
</ul>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>dvh plot for the selected structures</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="portpy.photon.plan.Plan.plot_fluence_2d">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">plot_fluence_2d</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">beam_id</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sol</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">dict</span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">options</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/portpy/photon/plan.html#Plan.plot_fluence_2d"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#portpy.photon.plan.Plan.plot_fluence_2d" title="Permalink to this definition"></a></dt>
<dd><p>plot fluence in 2d for beam_id
:param beam_id: beam_id of the beam
:param sol: solution dictionary after optimization
:return: 2d optimal fluence plot</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="portpy.photon.plan.Plan.plot_fluence_3d">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">plot_fluence_3d</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">beam_id</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sol</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">dict</span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">options</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/portpy/photon/plan.html#Plan.plot_fluence_3d"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#portpy.photon.plan.Plan.plot_fluence_3d" title="Permalink to this definition"></a></dt>
<dd><p>plot fluence in 3d for beam_id
:param sol: solution after optimization
:param beam_id: beam_id of the beam
:return: 3d optimal fluence plot</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="portpy.photon.plan.Plan.run_IMRT_fluence_map_CVXPy">
<span class="sig-name descname"><span class="pre">run_IMRT_fluence_map_CVXPy</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">inf_matrix</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="#portpy.photon.influence_matrix.InfluenceMatrix" title="portpy.photon.influence_matrix.InfluenceMatrix"><span class="pre">InfluenceMatrix</span></a><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">solver</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'MOSEK'</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/portpy/photon/plan.html#Plan.run_IMRT_fluence_map_CVXPy"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#portpy.photon.plan.Plan.run_IMRT_fluence_map_CVXPy" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="portpy.photon.plan.Plan.save_nrrd">
<span class="sig-name descname"><span class="pre">save_nrrd</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">sol</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">data_dir</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/portpy/photon/plan.html#Plan.save_nrrd"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#portpy.photon.plan.Plan.save_nrrd" title="Permalink to this definition"></a></dt>
<dd><p>save nrrd in the path directory else save in patient data directory
:param sol: optimal solution dict
:param data_dir: save nrrd images of ct, dose_1d and structure set in path directory
:return: save nrrd images in path</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="portpy.photon.plan.Plan.save_optimal_sol">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">save_optimal_sol</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">sol</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sol_name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">path</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="reference internal" href="_modules/portpy/photon/plan.html#Plan.save_optimal_sol"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#portpy.photon.plan.Plan.save_optimal_sol" title="Permalink to this definition"></a></dt>
<dd><p>Save the optimal solution dictionary from optimization</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>sol</strong> – optimal solution dictionary</p></li>
<li><p><strong>sol_name</strong> – name of the optimal solution saved</p></li>
<li><p><strong>path</strong> – if path is set, plan object will be load from path directory else current directory</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>save pickled file of optimal solution dictionary</p>
</dd>
<dt class="field-odd">Example<span class="colon">:</span></dt>
<dd class="field-odd"><p></p></dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">my_plan</span><span class="o">.</span><span class="n">save_optimal_sol</span><span class="p">(</span><span class="n">sol</span><span class="o">=</span><span class="n">sol</span><span class="p">,</span> <span class="n">sol_name</span><span class="o">=</span><span class="s1">&#39;sol&#39;</span><span class="p">,</span> <span class="n">path</span><span class="o">=</span><span class="sa">r</span><span class="s1">&#39;path/to/save_solution&#39;</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="portpy.photon.plan.Plan.save_plan">
<span class="sig-name descname"><span class="pre">save_plan</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">plan_name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">path</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="reference internal" href="_modules/portpy/photon/plan.html#Plan.save_plan"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#portpy.photon.plan.Plan.save_plan" title="Permalink to this definition"></a></dt>
<dd><p>Save pickled file for plan object</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>plan_name</strong> – create the name of the pickled file of plan object. If none, it will save with the name as ‘my_plan’</p></li>
<li><p><strong>path</strong> – if path is set, plan object will be pickled and saved in path directory else it will save current project directory</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>save pickled object of class Plan</p>
</dd>
<dt class="field-odd">Example<span class="colon">:</span></dt>
<dd class="field-odd"><p></p></dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">my_plan</span><span class="o">.</span><span class="n">save_plan</span><span class="p">(</span><span class="n">plan_name</span><span class="o">=</span><span class="s1">&#39;my_plan&#39;</span><span class="p">,</span> <span class="n">path</span><span class="o">=</span><span class="sa">r</span><span class="s2">&quot;path/to/save_plan&quot;</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="portpy.photon.plan.Plan.view_in_slicer">
<span class="sig-name descname"><span class="pre">view_in_slicer</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">slicer_path</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">img_dir</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/portpy/photon/plan.html#Plan.view_in_slicer"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#portpy.photon.plan.Plan.view_in_slicer" title="Permalink to this definition"></a></dt>
<dd><p>view ct, dose_1d and structures in slicer
:param slicer_path:
:param img_dir:
:return:</p>
</dd></dl>

</dd></dl>

</section>
<section id="module-portpy.photon.structures">
<span id="portpy-photon-structures-module"></span><h2>portpy.photon.structures module<a class="headerlink" href="#module-portpy.photon.structures" title="Permalink to this heading"></a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="portpy.photon.structures.Structures">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">portpy.photon.structures.</span></span><span class="sig-name descname"><span class="pre">Structures</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">structures</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">opt_voxels</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/portpy/photon/structures.html#Structures"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#portpy.photon.structures.Structures" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>A class representing structures.</p>
<ul>
<li><p><strong>Attributes</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">:</span><span class="n">param</span> <span class="n">structures_dict</span><span class="p">:</span> <span class="n">structure</span> <span class="n">dictionary</span> <span class="n">that</span> <span class="n">contains</span> <span class="n">information</span> <span class="n">about</span> <span class="n">the</span> <span class="n">structures</span> <span class="n">present</span> <span class="ow">in</span> <span class="n">the</span> <span class="n">patient</span><span class="s1">&#39;s CT scan.</span>
<span class="p">:</span><span class="nb">type</span> <span class="n">structures_dict</span><span class="p">:</span> <span class="nb">dict</span>
<span class="p">:</span><span class="n">param</span> <span class="n">opt_voxels_dict</span><span class="p">:</span> <span class="n">It</span> <span class="n">contains</span> <span class="n">information</span> <span class="n">about</span> <span class="n">optimization</span> <span class="n">voxels</span> <span class="ow">in</span> <span class="n">the</span> <span class="n">form</span> <span class="n">of</span> <span class="n">dictionary</span>
<span class="p">:</span><span class="nb">type</span> <span class="n">opt_voxels_dict</span><span class="p">:</span> <span class="nb">dict</span>
</pre></div>
</div>
</li>
<li><p><strong>Methods</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">:</span><span class="n">get_volume_cc</span><span class="p">(</span><span class="n">struct</span><span class="p">):</span>
    <span class="n">Get</span> <span class="n">volume</span> <span class="ow">in</span> <span class="n">cc</span> <span class="k">for</span> <span class="n">the</span> <span class="n">structure</span>
<span class="p">:</span><span class="n">expand</span><span class="p">(</span><span class="n">structure</span><span class="p">,</span> <span class="n">margin_mm</span><span class="p">,</span> <span class="n">new_structure</span><span class="p">):</span>
    <span class="n">Expand</span> <span class="n">the</span> <span class="n">structure</span> <span class="k">with</span> <span class="n">margin_mm</span> <span class="ow">in</span> <span class="n">mm</span>
<span class="p">:</span><span class="n">shrink</span><span class="p">(</span><span class="n">structure</span><span class="p">,</span> <span class="n">margin_mm</span><span class="p">,</span> <span class="n">new_structure</span><span class="p">):</span>
    <span class="n">Shrink</span> <span class="n">the</span> <span class="n">structure</span> <span class="k">with</span> <span class="n">margin_mm</span> <span class="ow">in</span> <span class="n">mm</span>
<span class="p">:</span><span class="n">union</span><span class="p">(</span><span class="n">str_1</span><span class="p">,</span> <span class="n">str_2</span><span class="p">,</span> <span class="n">str1_or_str2</span><span class="p">):</span>
    <span class="n">Create</span> <span class="n">union</span> <span class="n">of</span> <span class="n">two</span> <span class="n">structures</span> <span class="n">str_1</span> <span class="ow">and</span> <span class="n">str_2</span>
<span class="p">:</span><span class="n">intersect</span><span class="p">(</span><span class="n">str_1</span><span class="p">,</span> <span class="n">str_2</span><span class="p">,</span> <span class="n">str1_and_str2</span><span class="p">):</span>
    <span class="n">Create</span> <span class="n">intersect</span> <span class="n">of</span> <span class="n">two</span> <span class="n">structures</span> <span class="n">str_1</span> <span class="ow">and</span> <span class="n">str_2</span>
</pre></div>
</div>
</li>
</ul>
<dl class="py method">
<dt class="sig sig-object py" id="portpy.photon.structures.Structures.create_structure">
<span class="sig-name descname"><span class="pre">create_structure</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">new_structure</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mask_3d</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">ndarray</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="reference internal" href="_modules/portpy/photon/structures.html#Structures.create_structure"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#portpy.photon.structures.Structures.create_structure" title="Permalink to this definition"></a></dt>
<dd><p>Create a new structure and append its mask to the structures_dict</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>new_structure</strong> – name of the new structure</p></li>
<li><p><strong>mask_3d</strong> – 3d mask for the structure</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>create new_structure</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="portpy.photon.structures.Structures.delete_structure">
<span class="sig-name descname"><span class="pre">delete_structure</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">structure</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/portpy/photon/structures.html#Structures.delete_structure"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#portpy.photon.structures.Structures.delete_structure" title="Permalink to this definition"></a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>structure</strong> – structure to be removed</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="portpy.photon.structures.Structures.expand">
<span class="sig-name descname"><span class="pre">expand</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">structure</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">margin_mm</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">new_structure</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="reference internal" href="_modules/portpy/photon/structures.html#Structures.expand"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#portpy.photon.structures.Structures.expand" title="Permalink to this definition"></a></dt>
<dd><p>Expand the structure with the given margin_mm.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>structure</strong> – structure name to expand</p></li>
<li><p><strong>margin_mm</strong> – margin_mm in mm</p></li>
<li><p><strong>new_structure</strong> – new structure name. if same as structure name,</p></li>
</ul>
</dd>
</dl>
<p>expand the same structure. else create new structure
:return: expand and save the structure mask in structures dictionary</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="portpy.photon.structures.Structures.get_fraction_of_vol_in_calc_box">
<span class="sig-name descname"><span class="pre">get_fraction_of_vol_in_calc_box</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">structure_name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/portpy/photon/structures.html#Structures.get_fraction_of_vol_in_calc_box"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#portpy.photon.structures.Structures.get_fraction_of_vol_in_calc_box" title="Permalink to this definition"></a></dt>
<dd><p>Get fraction of volume in calc box for the structure</p>
<blockquote>
<div><dl class="field-list simple">
<dt class="field-odd">param structure_name<span class="colon">:</span></dt>
<dd class="field-odd"><p>name of the structure in plan</p>
</dd>
<dt class="field-even">return<span class="colon">:</span></dt>
<dd class="field-even"><p>volume of the structure</p>
</dd>
</dl>
</div></blockquote>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="portpy.photon.structures.Structures.get_structures">
<span class="sig-name descname"><span class="pre">get_structures</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">list</span></span></span><a class="reference internal" href="_modules/portpy/photon/structures.html#Structures.get_structures"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#portpy.photon.structures.Structures.get_structures" title="Permalink to this definition"></a></dt>
<dd><p>Returns all the structure names as list
:return:</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="portpy.photon.structures.Structures.get_volume_cc">
<span class="sig-name descname"><span class="pre">get_volume_cc</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">structure_name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/portpy/photon/structures.html#Structures.get_volume_cc"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#portpy.photon.structures.Structures.get_volume_cc" title="Permalink to this definition"></a></dt>
<dd><p>Get volume in cc for the structure</p>
<blockquote>
<div><dl class="field-list simple">
<dt class="field-odd">param structure_name<span class="colon">:</span></dt>
<dd class="field-odd"><p>name of the structure in plan</p>
</dd>
<dt class="field-even">return<span class="colon">:</span></dt>
<dd class="field-even"><p>volume of the structure</p>
</dd>
</dl>
</div></blockquote>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="portpy.photon.structures.Structures.intersect">
<span class="sig-name descname"><span class="pre">intersect</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">str_1</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">str_2</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">str1_and_str2</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="reference internal" href="_modules/portpy/photon/structures.html#Structures.intersect"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#portpy.photon.structures.Structures.intersect" title="Permalink to this definition"></a></dt>
<dd><p>Create intersection of two structures str_1 and str_2. If str1_and_str2 is not in structures dict,
it will create new structures. If str1_and_str2 is in structure_dict, it will modify the structure</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>str_1</strong> – structure name for the 1st structure</p></li>
<li><p><strong>str_2</strong> – structure name for the 2nd structure</p></li>
<li><p><strong>str1_and_str2</strong> – structure name for the intersection of  structure 1 and 2</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>create intersection of the structures and save it to structures list</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="portpy.photon.structures.Structures.modify_structure">
<span class="sig-name descname"><span class="pre">modify_structure</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">structure</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mask_3d</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">ndarray</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/portpy/photon/structures.html#Structures.modify_structure"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#portpy.photon.structures.Structures.modify_structure" title="Permalink to this definition"></a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>structure</strong> – name of the structure to be modified</p></li>
<li><p><strong>mask_3d</strong> – 3d mask for the structure</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>modify structure</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="portpy.photon.structures.Structures.preprocess_structures">
<span class="sig-name descname"><span class="pre">preprocess_structures</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/portpy/photon/structures.html#Structures.preprocess_structures"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#portpy.photon.structures.Structures.preprocess_structures" title="Permalink to this definition"></a></dt>
<dd><p>preprocess structures to create optimization voxel indices for the structure
:return:</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="portpy.photon.structures.Structures.shrink">
<span class="sig-name descname"><span class="pre">shrink</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">structure</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">margin_mm</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">new_structure</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="reference internal" href="_modules/portpy/photon/structures.html#Structures.shrink"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#portpy.photon.structures.Structures.shrink" title="Permalink to this definition"></a></dt>
<dd><p>Shrink the structure with margin_mm.</p>
<blockquote>
<div><dl class="field-list simple">
<dt class="field-odd">param structure<span class="colon">:</span></dt>
<dd class="field-odd"><p>structure name to shrink</p>
</dd>
<dt class="field-even">param margin_mm<span class="colon">:</span></dt>
<dd class="field-even"><p>margin_mm in mm</p>
</dd>
<dt class="field-odd">param new_structure<span class="colon">:</span></dt>
<dd class="field-odd"><p>new structure name. if same as structure, shrink the same structure. else create new structure</p>
</dd>
<dt class="field-even">return<span class="colon">:</span></dt>
<dd class="field-even"><p>shrink and save the structure in structures_dictionary</p>
</dd>
</dl>
</div></blockquote>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="portpy.photon.structures.Structures.subtract">
<span class="sig-name descname"><span class="pre">subtract</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">str_1</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">str_2</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">str1_sub_str2</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="reference internal" href="_modules/portpy/photon/structures.html#Structures.subtract"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#portpy.photon.structures.Structures.subtract" title="Permalink to this definition"></a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>str_1</strong> – structure name for the 1st structure</p></li>
<li><p><strong>str_2</strong> – structure name for the 2nd structure</p></li>
<li><p><strong>str1_sub_str2</strong> – structure name for subtracting 2 from 1</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>create structure1 - structure2 and save it to list</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="portpy.photon.structures.Structures.union">
<span class="sig-name descname"><span class="pre">union</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">str_1</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">str_2</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">str1_or_str2</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="reference internal" href="_modules/portpy/photon/structures.html#Structures.union"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#portpy.photon.structures.Structures.union" title="Permalink to this definition"></a></dt>
<dd><p>Create union of two structures str_1 and str_2. If str1_or_str2 is not in structures dict,
it will create new structures. If str1_or_str2 is in structure_dict, it will modify the structure</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>str_1</strong> – structure name for the 1st structure</p></li>
<li><p><strong>str_2</strong> – structure name for the 2nd structure</p></li>
<li><p><strong>str1_or_str2</strong> – structure name for the union of  structure 1 and 2</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>create union of the structures and save it to structures list</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</section>
<section id="module-portpy.photon.visualization">
<span id="portpy-photon-visualization-module"></span><h2>portpy.photon.visualization module<a class="headerlink" href="#module-portpy.photon.visualization" title="Permalink to this heading"></a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="portpy.photon.visualization.Visualization">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">portpy.photon.visualization.</span></span><span class="sig-name descname"><span class="pre">Visualization</span></span><a class="reference internal" href="_modules/portpy/photon/visualization.html#Visualization"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#portpy.photon.visualization.Visualization" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<dl class="py method">
<dt class="sig sig-object py" id="portpy.photon.visualization.Visualization.display_patient_metadata">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">display_patient_metadata</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">patient_id</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">data_dir</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">in_browser</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">return_beams_df</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">return_structs_df</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/portpy/photon/visualization.html#Visualization.display_patient_metadata"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#portpy.photon.visualization.Visualization.display_patient_metadata" title="Permalink to this definition"></a></dt>
<dd><p>Displays the patient information in console or html format. If in_browswer is enabled
it creates a temporary html file and lnunches your browser</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>patient_id</strong> – the patient id</p></li>
<li><p><strong>data_dir</strong> – the folder path where data located, defaults to None.
If path = None, then it assumes the data is in sub-folder named data in the current directory</p></li>
<li><p><strong>in_browser</strong> – visualize in pretty way in browser. default to False. If false, plot table in console</p></li>
<li><p><strong>return_beams_df</strong> – return dataframe containing beams metadata</p></li>
<li><p><strong>return_structs_df</strong> – return dataframe containing structures metadata</p></li>
</ul>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>invalid directory error</strong> – raises an exception if invalid data directory</p>
</dd>
<dt class="field-odd">Example<span class="colon">:</span></dt>
<dd class="field-odd"><p></p></dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">Visualization</span><span class="o">.</span><span class="n">display_patient_metadata</span><span class="p">(</span><span class="n">patient_id</span><span class="o">=</span><span class="n">patient_id</span><span class="p">,</span> <span class="n">data_dir</span><span class="o">=</span><span class="s1">&#39;path/to/data&#39;</span><span class="p">,</span> <span class="n">in_browser</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="portpy.photon.visualization.Visualization.display_patients">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">display_patients</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data_dir</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">in_browser</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">return_df</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/portpy/photon/visualization.html#Visualization.display_patients"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#portpy.photon.visualization.Visualization.display_patients" title="Permalink to this definition"></a></dt>
<dd><p>Displays the list of patients included in data_dir folder</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>data_dir</strong> – folder including patient data.
If it is None, then it assumes the data is in the current directory under sub-folder named “data”</p></li>
<li><p><strong>in_browser</strong> – visualize in pretty way in browser. default to False. If false, plot table in console</p></li>
<li><p><strong>return_df</strong> – return dataframe instead of visualization</p></li>
</ul>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>invalid directory error</strong> – raises an exception if invalid data directory.</p>
</dd>
</dl>
<p>:return display patient information in table</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="portpy.photon.visualization.Visualization.dose_type">
<span class="sig-name descname"><span class="pre">dose_type</span></span><a class="headerlink" href="#portpy.photon.visualization.Visualization.dose_type" title="Permalink to this definition"></a></dt>
<dd><p>alias of <code class="xref py py-obj docutils literal notranslate"><span class="pre">Literal</span></code>[Absolute(Gy), Relative(%)]</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="portpy.photon.visualization.Visualization.get_cmap_colors">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">get_cmap_colors</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">n</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'hsv'</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/portpy/photon/visualization.html#Visualization.get_cmap_colors"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#portpy.photon.visualization.Visualization.get_cmap_colors" title="Permalink to this definition"></a></dt>
<dd><p>Returns a function that maps each index in 0, 1, …, n-1 to a distinct
RGB color; the keyword argument name must be a standard mpl colormap name.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="portpy.photon.visualization.Visualization.get_colors">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">get_colors</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/portpy/photon/visualization.html#Visualization.get_colors"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#portpy.photon.visualization.Visualization.get_colors" title="Permalink to this definition"></a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>return list of 20 colors</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="portpy.photon.visualization.Visualization.is_notebook">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">is_notebook</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">bool</span></span></span><a class="reference internal" href="_modules/portpy/photon/visualization.html#Visualization.is_notebook"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#portpy.photon.visualization.Visualization.is_notebook" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="portpy.photon.visualization.Visualization.legend_dose_storage">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">legend_dose_storage</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">my_plan</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="#portpy.photon.plan.Plan" title="portpy.photon.plan.Plan"><span class="pre">Plan</span></a></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">dict</span></span></span><a class="reference internal" href="_modules/portpy/photon/visualization.html#Visualization.legend_dose_storage"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#portpy.photon.visualization.Visualization.legend_dose_storage" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="portpy.photon.visualization.Visualization.plan_metrics">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">plan_metrics</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">my_plan</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="#portpy.photon.plan.Plan" title="portpy.photon.plan.Plan"><span class="pre">Plan</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">sol</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Union</span><span class="p"><span class="pre">[</span></span><span class="pre">dict</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">dict</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">html_file_name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'temp.html'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sol_names</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">return_df</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/portpy/photon/visualization.html#Visualization.plan_metrics"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#portpy.photon.visualization.Visualization.plan_metrics" title="Permalink to this definition"></a></dt>
<dd><p>Visualize the plan metrics for clinical criteria in browser.
It evaluate the plan by comparing the metrics against required criteria.</p>
<p>If plan value is green color. It meets all the Limits and Goals
If plan value is yellow color. It meets limits but not goals
If plan value is red color. It violates both limit and goals</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>my_plan</strong> – object of class Plan</p></li>
<li><p><strong>sol</strong> – optimal solution dictionary</p></li>
<li><p><strong>html_file_name</strong> – name of the html file to be launched in browser</p></li>
<li><p><strong>sol_names</strong> – Default to Plan Value. column names for the plan evaluation</p></li>
<li><p><strong>return_df</strong> – return df instead of visualization</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>plan metrics in browser</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="portpy.photon.visualization.Visualization.plot_2d_dose">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">plot_2d_dose</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">my_plan</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="#portpy.photon.plan.Plan" title="portpy.photon.plan.Plan"><span class="pre">Plan</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">sol</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">slice_num</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">40</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">structs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">show_dose</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">show_struct</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">show_isodose</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">options</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="reference internal" href="_modules/portpy/photon/visualization.html#Visualization.plot_2d_dose"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#portpy.photon.visualization.Visualization.plot_2d_dose" title="Permalink to this definition"></a></dt>
<dd><p>Plot 2d view of ct, dose_1d, isodose and structure contours</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>sol</strong> – solution to optimization</p></li>
<li><p><strong>my_plan</strong> – object of class Plan</p></li>
<li><p><strong>slice_num</strong> – slice number</p></li>
<li><p><strong>structs</strong> – structures for which contours to be displayed on the slice view. e.g. structs = [‘PTV, ESOPHAGUS’]</p></li>
<li><p><strong>show_dose</strong> – view dose_1d on the slice</p></li>
<li><p><strong>show_struct</strong> – view structure on the slice</p></li>
<li><p><strong>show_isodose</strong> – view isodose</p></li>
<li><p><strong>dpi</strong> – Default dpi=100 for figure</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>plot 2d view of ct, dose_1d, isodose and structure contours</p>
</dd>
<dt class="field-odd">Example<span class="colon">:</span></dt>
<dd class="field-odd"><p></p></dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">Visualization</span><span class="o">.</span><span class="n">plot_2d_dose</span><span class="p">(</span><span class="n">my_plan</span><span class="p">,</span> <span class="n">sol</span><span class="o">=</span><span class="n">sol</span><span class="p">,</span> <span class="n">slice_num</span><span class="o">=</span><span class="mi">50</span><span class="p">,</span> <span class="n">structs</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;PTV&#39;</span><span class="p">],</span> <span class="n">show_isodose</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="portpy.photon.visualization.Visualization.plot_binary_mask_points">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">plot_binary_mask_points</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">my_plan</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">structure</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">show</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">color</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/portpy/photon/visualization.html#Visualization.plot_binary_mask_points"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#portpy.photon.visualization.Visualization.plot_binary_mask_points" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="portpy.photon.visualization.Visualization.plot_dvh">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">plot_dvh</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">my_plan</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="#portpy.photon.plan.Plan" title="portpy.photon.plan.Plan"><span class="pre">Plan</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">sol</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dose_1d</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">np.ndarray</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">structs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dose_scale</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dose_type</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'Absolute(Gy)'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">volume_scale</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">volume_type</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'Relative(%)'</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">options</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/portpy/photon/visualization.html#Visualization.plot_dvh"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#portpy.photon.visualization.Visualization.plot_dvh" title="Permalink to this definition"></a></dt>
<dd><p>Create dvh plot for the selected structures</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>my_plan</strong> – object of class Plan</p></li>
<li><p><strong>sol</strong> – optimal sol dictionary</p></li>
<li><p><strong>dose_1d</strong> – dose_1d in 1d voxels</p></li>
<li><p><strong>structs</strong> – structures to be included in dvh plot</p></li>
<li><p><strong>volume_scale</strong> – volume scale on y-axis. Default= Absolute(cc). e.g. volume_scale = “Absolute(cc)” or volume_scale = “Relative(%)”</p></li>
<li><p><strong>dose_scale</strong> – dose_1d scale on x axis. Default= Absolute(Gy). e.g. dose_scale = “Absolute(Gy)” or dose_scale = “Relative(%)”</p></li>
</ul>
</dd>
<dt class="field-even">Keyword Arguments<span class="colon">:</span></dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>(</strong><strong>str</strong><strong>)</strong> (<em>style</em>) – line style for dvh curve. default “solid”. can be “dotted”, “dash-dotted”.</p></li>
<li><p><strong>(</strong><strong>int</strong><strong>)</strong> (<em>width</em>) – width of line. Default 2</p></li>
<li><p><strong>colors</strong><strong>(</strong><strong>list</strong><strong>)</strong> – list of colors</p></li>
<li><p><strong>legend_font_size</strong> – Set legend_font_size. default 10</p></li>
<li><p><strong>figsize</strong> – Set figure size for the plot. Default figure size (12,8)</p></li>
<li><p><strong>create_fig</strong> – Create a new figure. Default True. If False, append to the previous figure</p></li>
<li><p><strong>title</strong> – Title for the figure</p></li>
<li><p><strong>filename</strong> – Name of the file to save the figure in current directory</p></li>
<li><p><strong>show</strong> – Show the figure. Default is True. If false, next plot can be append to it</p></li>
<li><p><strong>norm_flag</strong> – Use to normalize the plan. Default is False.</p></li>
<li><p><strong>norm_volume</strong> – Use to set normalization volume. default is 90 percentile.</p></li>
</ul>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>dvh plot for the selected structures</p>
</dd>
<dt class="field-even">Example<span class="colon">:</span></dt>
<dd class="field-even"><p></p></dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">Visualization</span><span class="o">.</span><span class="n">plot_dvh</span><span class="p">(</span><span class="n">my_plan</span><span class="p">,</span> <span class="n">sol</span><span class="o">=</span><span class="n">sol</span><span class="p">,</span> <span class="n">structs</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;PTV&#39;</span><span class="p">,</span> <span class="s1">&#39;ESOPHAGUS&#39;</span><span class="p">],</span> <span class="n">dose_scale</span><span class="o">=</span><span class="s1">&#39;Absolute(Gy)&#39;</span><span class="p">,</span><span class="n">volume_scale</span><span class="o">=</span><span class="s2">&quot;Relative(%)&quot;</span><span class="p">,</span> <span class="n">show</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">create_fig</span><span class="o">=</span><span class="kc">True</span> <span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="portpy.photon.visualization.Visualization.plot_fluence_2d">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">plot_fluence_2d</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">beam_id</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sol</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">options</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/portpy/photon/visualization.html#Visualization.plot_fluence_2d"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#portpy.photon.visualization.Visualization.plot_fluence_2d" title="Permalink to this definition"></a></dt>
<dd><p>Displays fluence in 2d for the given beam_id</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>beam_id</strong> – beam_id of the beam</p></li>
<li><p><strong>sol</strong> – solution dictionary after optimization</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>2d optimal fluence plot</p>
</dd>
<dt class="field-odd">Example<span class="colon">:</span></dt>
<dd class="field-odd"><p></p></dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">Visualization</span><span class="o">.</span><span class="n">plot_fluence_2d</span><span class="p">(</span><span class="n">beam_id</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">sol</span><span class="o">=</span><span class="n">sol</span><span class="p">,</span> <span class="o">**</span><span class="n">options</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="portpy.photon.visualization.Visualization.plot_fluence_3d">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">plot_fluence_3d</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">beam_id</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sol</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">options</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/portpy/photon/visualization.html#Visualization.plot_fluence_3d"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#portpy.photon.visualization.Visualization.plot_fluence_3d" title="Permalink to this definition"></a></dt>
<dd><p>Displays fluence in 3d for the given beam_id</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>sol</strong> – solution after optimization</p></li>
<li><p><strong>beam_id</strong> – beam_id of the beam</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>3d optimal fluence plot</p>
</dd>
<dt class="field-odd">Example<span class="colon">:</span></dt>
<dd class="field-odd"><p></p></dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">Visualization</span><span class="o">.</span><span class="n">plot_fluence_3d</span><span class="p">(</span><span class="n">beam_id</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">sol</span><span class="o">=</span><span class="n">sol</span><span class="p">,</span> <span class="o">**</span><span class="n">options</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="portpy.photon.visualization.Visualization.plot_robust_dvh">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">plot_robust_dvh</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">my_plan</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dose_list</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">structs</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">style</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'solid'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">norm_flag</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">norm_volume</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">90</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">norm_struct</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'PTV'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">weight_flag</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">plot_scenario</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">width</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">colors</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">figsize</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">(12,</span> <span class="pre">8)</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">legend_font_size</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">10</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">title</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">filename</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">show</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/portpy/photon/visualization.html#Visualization.plot_robust_dvh"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#portpy.photon.visualization.Visualization.plot_robust_dvh" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="portpy.photon.visualization.Visualization.surface_plot">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">surface_plot</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">matrix</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">ndarray</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/portpy/photon/visualization.html#Visualization.surface_plot"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#portpy.photon.visualization.Visualization.surface_plot" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="portpy.photon.visualization.Visualization.view_in_slicer">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">view_in_slicer</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">my_plan</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="#portpy.photon.plan.Plan" title="portpy.photon.plan.Plan"><span class="pre">Plan</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">slicer_path</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">data_dir</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="reference internal" href="_modules/portpy/photon/visualization.html#Visualization.view_in_slicer"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#portpy.photon.visualization.Visualization.view_in_slicer" title="Permalink to this definition"></a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>my_plan</strong> – object of class Plan</p></li>
<li><p><strong>slicer_path</strong> – slicer executable path on your local machine</p></li>
<li><p><strong>data_dir</strong> – the folder path where data located, defaults to None.
If path = None, then it assumes the data is in sub-folder named data in the current directory</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>plot the images in 3d slicer</p>
</dd>
</dl>
<p>view ct, dose_1d and structure set images in 3d slicer</p>
<dl class="field-list simple">
<dt class="field-odd">Example<span class="colon">:</span></dt>
<dd class="field-odd"><p></p></dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">Visualization</span><span class="o">.</span><span class="n">view_in_slicer</span><span class="p">(</span><span class="n">my_plan</span><span class="p">,</span> <span class="n">slicer_path</span><span class="o">=</span><span class="s1">&#39;C:/Slicer/Slicer.exe&#39;</span><span class="p">,</span> <span class="n">data_dir</span><span class="o">=</span><span class="s1">&#39;path/to/nrrd/image&#39;</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="portpy.photon.visualization.Visualization.view_in_slicer_jupyter">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">view_in_slicer_jupyter</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">my_plan</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="#portpy.photon.plan.Plan" title="portpy.photon.plan.Plan"><span class="pre">Plan</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">dose_1d</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">np.ndarray</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sol</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ct_name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'ct'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dose_name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'dose'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">struct_set_name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'rt_struct'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">show_ct</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">show_dose</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">show_structs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/portpy/photon/visualization.html#Visualization.view_in_slicer_jupyter"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#portpy.photon.visualization.Visualization.view_in_slicer_jupyter" title="Permalink to this definition"></a></dt>
<dd><p>This method helps to visualize CT, Dose and Rt struct in 3d slicer</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>my_plan</strong> – object of class plan</p></li>
<li><p><strong>dose_1d</strong> – dose in 1d</p></li>
<li><p><strong>sol</strong> – solution dictionary</p></li>
<li><p><strong>ct_name</strong> – Default to ‘ct’. name of the ct node in 3D slicer</p></li>
<li><p><strong>dose_name</strong> – Default to ‘dose’. name of the dose node in 3D slicer</p></li>
<li><p><strong>struct_set_name</strong> – name of the rtstruct</p></li>
<li><p><strong>show_structs</strong> – default to True. If false, will not create structure node</p></li>
<li><p><strong>show_dose</strong> – default to True. If false, will not create dose node</p></li>
</ul>
</dd>
</dl>
<p>:param show_ct:default to True. If false, will not create ct node
:return: visualize in slicer jupyter</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="portpy.photon.visualization.Visualization.volume_type">
<span class="sig-name descname"><span class="pre">volume_type</span></span><a class="headerlink" href="#portpy.photon.visualization.Visualization.volume_type" title="Permalink to this definition"></a></dt>
<dd><p>alias of <code class="xref py py-obj docutils literal notranslate"><span class="pre">Literal</span></code>[Absolute(cc), Relative(%)]</p>
</dd></dl>

</dd></dl>

</section>
<section id="module-portpy.photon">
<span id="module-contents"></span><h2>Module contents<a class="headerlink" href="#module-portpy.photon" title="Permalink to this heading"></a></h2>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="portpy.html" class="btn btn-neutral float-left" title="portpy package" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="portpy.photon.utils.html" class="btn btn-neutral float-right" title="portpy.photon.utils package" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2023, Gourav Jhanwar, Mojtaba Tefagh, Vicki Trier Taasti, Sadegh Alam, Seppo Tuomaala, Saad Nadeem and Masoud Zarepisheh.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>